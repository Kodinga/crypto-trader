{"version":3,"sources":["core/transport/types/ConnectionStatus.ts","core/transport/actions.ts","modules/redux/utils.ts","modules/selection/actions.ts","core/transport/middleware.ts","core/transport/WsConnectionProxy.ts","core/transport/Connection.ts","modules/reference-data/actions.ts","modules/reference-data/selectors.ts","modules/reference-data/utils.ts","modules/ticker/actions.ts","modules/candles/actions.ts","modules/app/actions.ts","modules/trades/actions.ts","modules/app/epics.ts","core/transport/epics.ts","modules/book/actions.ts","core/transport/selectors.ts","modules/trades/epics.ts","modules/reference-data/epics.ts","modules/ticker/epics.ts","modules/candles/epics.ts","modules/selection/selectors.ts","modules/selection/epics.ts","modules/book/epics.ts","core/transport/utils.ts","modules/trades/reducer.ts","core/transport/reducer.ts","modules/reference-data/reducer.ts","modules/ticker/reducer.ts","modules/candles/utils.ts","modules/candles/reducer.ts","modules/selection/reducer.ts","modules/book/reducer.ts","modules/root.ts","modules/redux/store.ts","core/hooks/useThrottle.ts","modules/ag-grid/formatter.ts","modules/trades/components/Trades/Trades.styled.ts","theme/style.ts","modules/trades/components/Trades/Trades.tsx","modules/trades/selectors.ts","modules/trades/components/Trades/index.ts","modules/trades/components/Trades/Trades.container.tsx","modules/candles/selectors.ts","modules/ticker/selectors.ts","core/utils.ts","core/hooks/usePrevious.ts","modules/ticker/components/Ticker/Ticker.styled.ts","modules/ticker/components/Tickers/Tickers.styled.ts","core/components/update-highlight/UpdateHightlight.styled.ts","core/components/update-highlight/UpdateHighlight.tsx","core/components/trend-indicator/TrendIndicator.styled.ts","core/components/trend-indicator/index.ts","core/components/trend-indicator/TrendIndicator.tsx","modules/ticker/components/Ticker/Ticker.tsx","modules/ticker/components/Ticker/index.ts","modules/ticker/components/Ticker/Ticker.container.tsx","modules/ticker/components/Tickers/Tickers.tsx","modules/ticker/components/Tickers/index.ts","modules/ticker/components/Tickers/Tickers.container.tsx","modules/candles/components/CandlesChart/CandlesChart.styled.ts","theme/Highstock.ts","modules/candles/components/CandlesChart/CandlesChart.tsx","modules/candles/components/CandlesChart/index.ts","modules/candles/components/CandlesChart/CandlesChart.container.tsx","modules/book/components/Book/renderers.ts","modules/book/components/Book/Book.styled.ts","modules/book/components/Book/Book.tsx","modules/book/selectors.ts","modules/book/components/Book/index.ts","modules/book/components/Book/Book.container.tsx","modules/book/components/DepthChart/DepthChart.styled.ts","theme/Highchart.ts","modules/book/components/DepthChart/DepthChart.tsx","modules/book/components/DepthChart/index.ts","modules/book/components/DepthChart/DepthChart.container.tsx","modules/ticker/components/Market/Market.styled.ts","core/components/LineChart/LineChart.styled.ts","core/components/LineChart/index.ts","core/components/LineChart/LineChart.tsx","modules/ticker/components/Market/PriceChart.styled.ts","modules/ticker/components/Market/PriceChart.tsx","modules/ticker/components/Market/Market.tsx","modules/ticker/components/Market/index.ts","modules/ticker/components/Market/Market.container.tsx","core/components/widget/Widget.styled.ts","core/components/widget/index.ts","core/components/widget/Widget.tsx","core/components/Diagnostics/Diagnostics.styled.ts","core/components/Diagnostics/index.ts","core/components/Diagnostics/Diagnostics.tsx","App.styled.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["ConnectionStatus","TRANSPORT_ACTION_TYPES","createAction","type","payload","meta","createReducer","handlers","initialState","state","action","hasOwnProperty","SELECTION_ACTION_TYPES","TransportActions","sendMessage","SEND_MESSAGE","receiveMessage","RECEIVE_MESSAGE","changeConnectionStatus","CHANGE_CONNECTION_STATUS","subscribeToChannel","SUBSCRIBE_TO_CHANNEL","subscribeToChannelAck","SUBSCRIBE_TO_CHANNEL_ACK","subscribeToChannelNack","SUBSCRIBE_TO_CHANNEL_NACK","unsubscribeFromChannel","UNSUBSCRIBE_FROM_CHANNEL","unsubscribeFromChannelAck","UNSUBSCRIBE_FROM_CHANNEL_ACK","unsubscribeFromChannelNack","UNSUBSCRIBE_FROM_CHANNEL_NACK","createWsMiddleware","connection","store","next","onReceive","data","parsedData","JSON","parse","undefined","channelId","Array","isArray","chanId","getState","subscriptions","WsConnectionProxy","realm","socket","onConnectFn","onReceivedFn","onErrorFn","this","WebSocket","onopen","onmessage","onerror","error","Error","message","send","callback","Connection","connectionProxy","start","stop","onConnect","onReceived","REF_DATA_ACTION_TYPES","SelectionActions","selectCurrencyPair","SELECT_CURRENCY_PAIR","getCurrencyPairs","createSelector","refData","currencyPairs","RefDataActions","loadRefData","LOAD_REF_DATA","loadRefDataAck","LOAD_REF_DATA_ACK","loadRefDataNack","LOAD_REF_DATA_NACK","parseCurrencyPair","currencyPair","slice","formatCurrencyPair","join","TICKER_ACTION_TYPES","formatPrice","price","numeral","format","CANDLES_ACTION_TYPES","TickerActions","subscribeToTicker","SUBSCRIBE_TO_TICKER","APP_ACTION_TYPES","CandlesActions","subscribeToCandles","SUBSCRIBE_TO_CANDLES","unsubscribeFromCandles","UNSUBSCRIBE_FROM_CANDLES","TRADES_ACTION_TYPES","AppActions","bootstrapApp","BOOTSTRAP_APP","combineEpics","action$","state$","pipe","ofType","switchMap","console","log","connect","filter","Connected","merge","of","take","mergeMap","value","tickerActions","map","symbol","candleActions","timeframe","from","counter","ticker","distinctUntilChanged","tap","document","title","lastPrice","toFixed","EMPTY","stringify","concatMap","rootAction","isSubscribing","event","channel","timeout","receiveMessageAction","msg","request","catchError","BOOK_ACTION_TYPES","TradesActions","subscribeToTrades","SUBSCRIBE_TO_TRADES","unsubscribeFromTrades","UNSUBSCRIBE_FROM_TRADES","getSubscriptions","getSubscription","Object","keys","Number","find","every","key","result","push","warn","fromFetch","response","json","BookActions","subscribeToBook","SUBSCRIBE_TO_BOOK","unsubscribeFromBook","UNSUBSCRIBE_FROM_BOOK","getSelectedCurrencyPair","selection","statePairs$","pairwise","withLatestFrom","oldState","oldCurrencyPair","unsubscribeActions","subscribeActions","prec","isHeartbeat","isSubscriptionMessage","isUnsubscriptionMessage","isErrorMessage","snapshotReducer","sort","a","b","id","timestamp","amount","updateReducer","trade","existingTradeIndex","findIndex","x","newOrUpdatedTrade","updatedState","splice","tradesReducer","subscriptionsReducer","refDataReducer","tickerReducer","bid","bidSize","ask","askSize","dailyChange","dailyChangeRelative","volume","high","low","getLookupKey","open","close","candle","candlesReducer","split","lookupKey","selectionReducer","order","existingOrderIndex","newOrUpdatedOrder","bookReducer","rootEpic","appEpics","refDataEpics","transportEpics","tradeEpics","tickerEpics","candlesEpics","selectionEpics","bookEpics","rootReducer","combineReducers","trades","candles","book","dependencies","epicMiddleware","createEpicMiddleware","wsMiddleware","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","useThrottleFn","fn","ms","throttledFn","useMemo","throttle","useEffect","cancel","useThrottle","useState","throttledValue","setThrottledValue","setThrottledValueThrottled","priceFormatter","params","amountFormatter","toString","volumeFormatter","timeFormatter","time","DateTime","fromMillis","toLocaleString","TIME_24_WITH_SECONDS","Container","styled","div","Palette","Bid","Ask","BidTransparent","AskTransparent","Positive","Negative","Orange","White","BackgroundColor","Label","Border","LightGray","DarkGray","Trades","props","throttledTrades","columnDefs","headerName","field","hide","valueFormatter","Math","abs","cellStyle","color","className","rowData","deltaRowDataMode","getRowNodeId","onGridReady","api","sizeColumnsToFit","getTrades","memoize","selectedCurrencyPair","candlesSelector","getCandles","tickerSelector","getTicker","getTickers","getVisibleCurrencyPairTickers","allCurrencyPairs","selectedCurrencyPairIndex","indexOf","range","index","values","length","getTickersWithPrices","tickers","prices","usePrevious","val","ref","useRef","current","isActive","CurrencyPair","Price","RelativeChange","isPositive","Change","TickerWrapper","itemCount","indexThreshold","floor","scaleFactor","reduce","acc","TickerContainer","direction","Content","IdenticalPart","UpdateHighlight","changedPartRef","createRef","prev","identicalPart","changedPart","setParts","prevValue","min","i","calculateParts","animation","animate","duration","iterations","timeoutId","setTimeout","clearTimeout","Icon","TrendIndicator","isHidden","setIsHidden","icon","Ticker","onClick","isPositiveChange","percentChange","dispatch","ownProps","Tickers","setDirection","previousSelectedCurrencyPairIndex","Highcharts","colors","chart","backgroundColor","stops","xAxis","labels","style","lineColor","minorGridLineColor","tickColor","yAxis","gridLineColor","tickWidth","tooltip","borderColor","plotOptions","series","dataLabels","fontSize","marker","boxplot","fillColor","candlestick","errorbar","legend","itemStyle","itemHoverStyle","itemHiddenStyle","credits","drilldown","activeAxisLabelStyle","activeDataLabelStyle","navigation","buttonOptions","symbolStroke","theme","fill","rangeSelector","buttonTheme","stroke","states","hover","select","inputBoxBorderColor","inputStyle","labelStyle","navigator","handles","outlineColor","maskFill","scrollbar","barBackgroundColor","barBorderColor","buttonArrowColor","buttonBackgroundColor","buttonBorderColor","rifleColor","trackBackgroundColor","trackBorderColor","CandlesChart","useUTC","align","text","height","lineWidth","resize","enabled","top","offset","name","selected","buttons","count","chartOptions","setChartOptions","ohlc","rest","volumes","upColor","column","highcharts","options","constructorType","amountRenderer","styles","formattedStyles","bidAmountRenderer","width","bidDepth","maxDepth","valueFormatted","left","askAmountRenderer","askDepth","right","Book","orders","throttledOrders","cellRenderer","bookSelector","getBook","rawBook","bids","asks","levels","max","v","forEach","level","getPricePoints","uniq","computeDepth","pricePoints","orderFilter","depth","getDepth","bidPrices","askPrices","pricePoint","DepthChart","throttledDepth","autoRotation","area","categories","step","formatter","parseFloat","SvgContainer","svg","LineChart","maxX","minValue","diff","getSvgX","getSvgY","y","pathD","viewBox","d","PriceChart","Market","gridApi","setGridApi","forEachNode","node","setSelected","redrawRows","rowClassRules","isSelected","rowSelection","onRowClicked","frameworkComponents","priceChartRenderer","PriceChartRenderer","Header","Body","Widget","children","Diagnostics","delay","setDelay","intervalId","setInterval","Date","now","clearInterval","TickersPanel","MarketPanel","TradesPanel","CandlesPanel","BookPanel","DepthPanel","Footer","App","createStore","applyMiddleware","run","configureStore","Boolean","location","hostname","match","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.74fbc3f6.chunk.js","sourcesContent":["export enum ConnectionStatus {\n    Unknown,\n    Connected,\n    Disconnected\n}","import { createAction, ActionUnion } from 'modules/redux/utils';\nimport { ConnectionStatus } from './types/ConnectionStatus';\nimport { TradesChannel, CandlesChannel, TickerChannel, BookChannel } from './types/Channels';\n\nexport enum TRANSPORT_ACTION_TYPES {\n    SEND_MESSAGE = 'TRANSPORT/SEND_MESSAGE',\n    RECEIVE_MESSAGE = 'TRANSPORT/RECEIVE_MESSAGE',\n    CHANGE_CONNECTION_STATUS = 'TRANSPORT/CHANGE_CONNECTION_STATUS',\n    SUBSCRIBE_TO_CHANNEL = 'TRANSPORT/SUBSCRIBE_TO_CHANNEL',\n    SUBSCRIBE_TO_CHANNEL_ACK = 'TRANSPORT/SUBSCRIBE_TO_CHANNEL_ACK',\n    SUBSCRIBE_TO_CHANNEL_NACK = 'TRANSPORT/SUBSCRIBE_TO_CHANNEL_NACK',\n    UNSUBSCRIBE_FROM_CHANNEL= 'TRANSPORT/UNSUBSCRIBE_FROM_CHANNEL',\n    UNSUBSCRIBE_FROM_CHANNEL_ACK = 'TRANSPORT/UNSUBSCRIBE_FROM_CHANNEL_ACK',\n    UNSUBSCRIBE_FROM_CHANNEL_NACK = 'TRANSPORT/UNSUBSCRIBE_FROM_CHANNEL_NACK'\n}\n\ninterface SubscribeToTrades {\n    channel: TradesChannel;\n    symbol: string; \n}\n\ninterface SubscribeToCandles {\n    channel: CandlesChannel;\n    key: string; \n}\n\ninterface SubscribeToTicker {\n    channel: TickerChannel;\n    symbol: string;\n}\n\ninterface SubscribeToBook {\n    channel: BookChannel;\n    symbol: string; \n    prec?: string;\n}\n\nexport type SubscribeToChannelActionPayload = SubscribeToTrades | SubscribeToCandles | SubscribeToTicker | SubscribeToBook;\n\nexport interface SubscribeToChannelAckActionPayload {\n    channel: string;\n    channelId: number;\n    request: any;\n}\n\nexport interface SubscribeToChannelNackActionPayload {\n    error: string;\n}\n\nexport interface ReceiveMessageActionMeta {\n    channel: string;\n    request?: any;\n}\n\nexport interface UnsubscribeFromChannelActionPayload {\n    channelId: number;\n}\n\nexport interface UnsubscribeFromChannelAckActionPayload {\n    channelId: number;\n}\n\nexport const TransportActions = {\n    sendMessage: createAction<TRANSPORT_ACTION_TYPES.SEND_MESSAGE, any>(TRANSPORT_ACTION_TYPES.SEND_MESSAGE),\n    receiveMessage: createAction<TRANSPORT_ACTION_TYPES.RECEIVE_MESSAGE, any, ReceiveMessageActionMeta | undefined>(TRANSPORT_ACTION_TYPES.RECEIVE_MESSAGE),\n    changeConnectionStatus: createAction<TRANSPORT_ACTION_TYPES.CHANGE_CONNECTION_STATUS, ConnectionStatus>(TRANSPORT_ACTION_TYPES.CHANGE_CONNECTION_STATUS),\n    subscribeToChannel: createAction<TRANSPORT_ACTION_TYPES.SUBSCRIBE_TO_CHANNEL, SubscribeToChannelActionPayload>(TRANSPORT_ACTION_TYPES.SUBSCRIBE_TO_CHANNEL),\n    subscribeToChannelAck: createAction<TRANSPORT_ACTION_TYPES.SUBSCRIBE_TO_CHANNEL_ACK, SubscribeToChannelAckActionPayload>(TRANSPORT_ACTION_TYPES.SUBSCRIBE_TO_CHANNEL_ACK),\n    subscribeToChannelNack: createAction<TRANSPORT_ACTION_TYPES.SUBSCRIBE_TO_CHANNEL_NACK, SubscribeToChannelNackActionPayload>(TRANSPORT_ACTION_TYPES.SUBSCRIBE_TO_CHANNEL_NACK),\n    unsubscribeFromChannel: createAction<TRANSPORT_ACTION_TYPES.UNSUBSCRIBE_FROM_CHANNEL, UnsubscribeFromChannelActionPayload>(TRANSPORT_ACTION_TYPES.UNSUBSCRIBE_FROM_CHANNEL),\n    unsubscribeFromChannelAck: createAction<TRANSPORT_ACTION_TYPES.UNSUBSCRIBE_FROM_CHANNEL_ACK, UnsubscribeFromChannelAckActionPayload>(TRANSPORT_ACTION_TYPES.UNSUBSCRIBE_FROM_CHANNEL_ACK),\n    unsubscribeFromChannelNack: createAction<TRANSPORT_ACTION_TYPES.UNSUBSCRIBE_FROM_CHANNEL_NACK>(TRANSPORT_ACTION_TYPES.UNSUBSCRIBE_FROM_CHANNEL_NACK),\n};\n\nexport type TransportActions = ActionUnion<typeof TransportActions>;\nexport type ReceiveMessage = ReturnType<typeof TransportActions.receiveMessage>;\nexport type SendMessage = ReturnType<typeof TransportActions.sendMessage>;\nexport type ChangeConnectionStatus = ReturnType<typeof TransportActions.changeConnectionStatus>;\nexport type SubscribeToChannel = ReturnType<typeof TransportActions.subscribeToChannel>;\nexport type SubscribeToChannelAck = ReturnType<typeof TransportActions.subscribeToChannelAck>;\nexport type SubscribeToChannelNack = ReturnType<typeof TransportActions.subscribeToChannelNack>;\nexport type UnsubscribeFromChannel = ReturnType<typeof TransportActions.unsubscribeFromChannel>;\nexport type UnsubscribeFromChannelAck = ReturnType<typeof TransportActions.unsubscribeFromChannelAck>;\nexport type UnsubscribeFromChannelNack = ReturnType<typeof TransportActions.unsubscribeFromChannelNack>;","import { ActionCreatorsMapObject } from 'redux';\n\nexport interface Action<T extends string> {\n    type: T;\n};\n\nexport interface ActionWithPayload<T extends string, P> extends Action<T> {\n    payload: P;\n}\n\nexport interface ActionWithPayloadAndMeta<T extends string, P, M> extends ActionWithPayload<T, P> {\n    meta: M;\n}\n\ntype ActionFn<T extends string> = () => Action<T>;\n\ntype ActionWithPayloadFn<T extends string, P> = (payload: P) => ActionWithPayload<T, P>;\n\ntype ActionWithPayloadAndMetaFn<T extends string, P, M> = (payload: P, meta: M) => ActionWithPayloadAndMeta<T, P, M>;\n\nexport function createAction<T extends string>(type: T): ActionFn<T>;\n\nexport function createAction<T extends string, P>(type: T): ActionWithPayloadFn<T, P>;\n\nexport function createAction<T extends string, P, M>(type: T): ActionWithPayloadAndMetaFn<T, P, M>;\n\nexport function createAction(type: string) {\n    return (payload?: any, meta?: any) => {\n        if (typeof payload === 'undefined') {\n            return { type };\n        }\n        if (typeof meta === 'undefined') {\n            return {\n                type,\n                payload\n            };\n        }\n\n        return {\n            type,\n            payload,\n            meta\n        };\n    }\n};\n\nexport type ActionUnion<A extends ActionCreatorsMapObject> = ReturnType<A[keyof A]>;\n\ntype ReducerMap<S, A> = A extends ActionWithPayloadAndMeta<infer T, infer P, infer M>\n    ? { [key in T]: (state: S, action: ActionWithPayloadAndMeta<T, P, M>) => S }\n    : A extends ActionWithPayload<infer T, infer P>\n        ? { [key in T]: (state: S, action: ActionWithPayload<T, P>) => S }\n        : A extends Action<infer T>\n            ? {  [key in T]: (state: S, action: Action<T>) => S }\n            : never;\n\nexport function createReducer<S, A extends { type: string }>(\n  handlers: ReducerMap<S, A>,\n  initialState: S,\n) {\n  return function reducer(state = initialState, action: A): S {\n    if (handlers.hasOwnProperty(action.type)) {\n      return handlers[action.type](state, action);\n    } else {\n      return state;\n    }\n  };\n}","import { createAction, ActionUnion } from '../redux/utils';\n\nexport enum SELECTION_ACTION_TYPES {\n    SELECT_CURRENCY_PAIR = 'SELECTION/SELECT_CURRENCY_PAIR'\n}\n\nexport interface SelectCurrencyPairActionPayload {\n    currencyPair: string;\n}\n\nexport const SelectionActions = {\n    selectCurrencyPair: createAction<SELECTION_ACTION_TYPES.SELECT_CURRENCY_PAIR, SelectCurrencyPairActionPayload>(SELECTION_ACTION_TYPES.SELECT_CURRENCY_PAIR)\n};\n\nexport type SelectionActions = ActionUnion<typeof SelectionActions>;\nexport type SelectCurrencyPair = ReturnType<typeof SelectionActions.selectCurrencyPair>;\n\n","import { Middleware, Dispatch } from 'redux';\nimport { Actions } from 'modules/root';\nimport { Connection } from './Connection';\nimport { TransportActions } from './actions';\n\nconst createWsMiddleware = ({ connection }: { connection: Connection }): Middleware => {\n    return store => (next: Dispatch) => {\n        connection.onReceive(data => {\n            const parsedData = JSON.parse(data);\n            let meta = undefined;\n            let channelId = undefined;\n\n            if (Array.isArray(parsedData)) {\n                channelId = parsedData[0];\n            } else if (parsedData.hasOwnProperty('chanId')) {\n                channelId = parsedData.chanId;\n            }\n            if (channelId && store.getState().subscriptions[channelId]) {\n                meta = store.getState().subscriptions[channelId];\n            }\n            next(TransportActions.receiveMessage(parsedData, meta));\n        });\n        return (action: Actions) => next(action);\n    };\n}\n\nexport default createWsMiddleware;","import { ConnectionProxy } from './types/ConnectionProxy';\n\nexport class WsConnectionProxy implements ConnectionProxy {\n    private socket?: WebSocket;\n    private onConnectFn?: () => void;\n    private onReceivedFn?: (data?: any) => void;\n    private onErrorFn?: (error: any) => void;\n\n    constructor(private realm: string) {\n        this.socket = undefined;\n        this.onReceivedFn = undefined;\n    }\n\n    start(): void {\n        this.socket = new WebSocket(this.realm);\n        this.socket.onopen = () => this.onConnectFn && this.onConnectFn();\n        this.socket.onmessage = ({ data }) => {\n            this.onReceivedFn && this.onReceivedFn(data);\n        }\n        this.socket.onerror = error => this.onErrorFn && this.onErrorFn(error);\n    }\n\n    stop(): void {\n        throw new Error(\"Method not implemented.\");\n    }\n\n    send(message: any): void {\n        if (this.socket) {\n            this.socket.send(message);\n        }\n    }\n\n    onConnect(callback: () => void): void {\n        this.onConnectFn = callback;\n    }\n\n    onReceived(callback: (data: any) => void): void {\n        this.onReceivedFn = callback;\n    }\n\n    onError(callback: (error: any) => void): void {\n        this.onErrorFn = callback;\n    }\n\n}","import { ConnectionProxy } from './types/ConnectionProxy';\n\nexport class Connection {\n    constructor(private connectionProxy: ConnectionProxy) {\n    }\n\n    connect() {\n        this.connectionProxy.start();\n    }\n\n    disconnect() {\n        this.connectionProxy.stop();\n    }\n\n    send(message: any): void {\n        this.connectionProxy.send(message);\n    }\n\n    onConnect(callback: () => void) {\n        this.connectionProxy.onConnect(callback);\n    }\n\n    onReceive(callback: (data: any) => void) {\n        this.connectionProxy.onReceived(callback);\n    }\n}\n","import { createAction, ActionUnion } from 'modules/redux/utils';\n\nexport enum REF_DATA_ACTION_TYPES {\n    LOAD_REF_DATA = 'REF_DATA/LOAD_REF_DATA',\n    LOAD_REF_DATA_ACK = 'REF_DATA/LOAD_REF_DATA_ACK',\n    LOAD_REF_DATA_NACK = 'REF_DATA/LOAD_REF_DATA_NACK'\n}\n\ninterface RefDataLoadAckActionPayload {\n    currencyPairs: string[];\n}\n\nexport const RefDataActions = {\n    loadRefData: createAction<REF_DATA_ACTION_TYPES.LOAD_REF_DATA>(REF_DATA_ACTION_TYPES.LOAD_REF_DATA),\n    loadRefDataAck: createAction<REF_DATA_ACTION_TYPES.LOAD_REF_DATA_ACK, RefDataLoadAckActionPayload>(REF_DATA_ACTION_TYPES.LOAD_REF_DATA_ACK),\n    loadRefDataNack: createAction<REF_DATA_ACTION_TYPES.LOAD_REF_DATA_NACK>(REF_DATA_ACTION_TYPES.LOAD_REF_DATA_NACK),\n};\n\nexport type RefDataActions = ActionUnion<typeof RefDataActions>;\nexport type LoadRefData = ReturnType<typeof RefDataActions.loadRefData>;\nexport type LoadRefDataAck = ReturnType<typeof RefDataActions.loadRefDataAck>;\nexport type LoadRefDataNack = ReturnType<typeof RefDataActions.loadRefDataNack>;","import { createSelector } from 'reselect';\nimport { RootState } from 'modules/root';\n\nconst refDataSelector = (state: RootState) => state.refData;\n\nexport const getCurrencyPairs = createSelector(\n    refDataSelector,\n    refData => refData.currencyPairs\n);\n","import { DateTime } from 'luxon';\nimport numeral from 'numeral';\nexport type Base = string;\nexport type Counter = string;\n\nexport function parseCurrencyPair(currencyPair: string): [Base, Counter] {\n    if (typeof currencyPair === 'undefined') {\n        return ['', ''];\n    }\n    const base = currencyPair.slice(0, 3);\n    const counter = currencyPair.slice(3);\n    return [base, counter];\n}\n\nexport function formatCurrencyPair(currencyPair: string): string {\n    const [base, counter] = parseCurrencyPair(currencyPair);\n    return [base, counter].join(' / ');\n}\n\nexport const formatPrice = (price: number | string | undefined) => numeral(price).format('0,0.00');\n\nexport const formatAmount = (amount: number | string | undefined) => amount ? amount.toString() : '';\n\nexport const formatVolume = (volume: number) => numeral(volume).format('0.00 a');\n\nexport const formatTime = (time: number) => DateTime.fromMillis(time).toLocaleString(DateTime.TIME_24_WITH_SECONDS);","import { createAction, ActionUnion } from '../redux/utils';\n\nexport enum TICKER_ACTION_TYPES {\n    SUBSCRIBE_TO_TICKER = 'TICKER/SUBSCRIBE_TO_TICKER'\n}\n\nexport interface SubscribeToTickerActionPayload {\n    symbol: string;\n}\n\nexport const TickerActions = {\n    subscribeToTicker: createAction<TICKER_ACTION_TYPES.SUBSCRIBE_TO_TICKER, SubscribeToTickerActionPayload>(TICKER_ACTION_TYPES.SUBSCRIBE_TO_TICKER)\n};\n\nexport type TickerActions = ActionUnion<typeof TickerActions>;\nexport type SubscribeToTickerAction = ReturnType<typeof TickerActions.subscribeToTicker>;\n\n","import { createAction, ActionUnion } from '../redux/utils';\n\ntype Timeframe = '1m' | '5m' | '15m' | '30m' | '1h' | '3h' | '6h' | '12h' | '1D' | '7D' | '14D' | '1M';\n\nexport enum CANDLES_ACTION_TYPES {\n    SUBSCRIBE_TO_CANDLES = 'CANDLES/SUBSCRIBE_TO_CANDLES',\n    UNSUBSCRIBE_FROM_CANDLES = 'CANDLES/UNSUBSCRIBE_FROM_CANDLES'\n}\n\nexport interface SubscribeToCandlesActionPayload {\n    symbol: string;\n    timeframe: Timeframe;\n}\n\nexport interface UnsubscribeFromCandlesActionPayload {\n    symbol: string;\n    timeframe: Timeframe;\n}\n\nexport const CandlesActions = {\n    subscribeToCandles: createAction<CANDLES_ACTION_TYPES.SUBSCRIBE_TO_CANDLES, SubscribeToCandlesActionPayload>(CANDLES_ACTION_TYPES.SUBSCRIBE_TO_CANDLES),\n    unsubscribeFromCandles: createAction<CANDLES_ACTION_TYPES.UNSUBSCRIBE_FROM_CANDLES, UnsubscribeFromCandlesActionPayload>(CANDLES_ACTION_TYPES.UNSUBSCRIBE_FROM_CANDLES),\n};\n\nexport type CandlesActions = ActionUnion<typeof CandlesActions>;\nexport type SubscribeToCandles = ReturnType<typeof CandlesActions.subscribeToCandles>;\nexport type UnsubscribeFromCandles = ReturnType<typeof CandlesActions.unsubscribeFromCandles>;\n","import { createAction, ActionUnion } from '../redux/utils';\n\nexport enum APP_ACTION_TYPES {\n    BOOTSTRAP_APP = 'APP/BOOTSTRAP_APP'\n}\n\nexport const AppActions = {\n    bootstrapApp: createAction<APP_ACTION_TYPES.BOOTSTRAP_APP>(APP_ACTION_TYPES.BOOTSTRAP_APP)\n};\n\nexport type AppActions = ActionUnion<typeof AppActions>;\nexport type BoostrapApp = ReturnType<typeof AppActions.bootstrapApp>;\n\n","import { createAction, ActionUnion } from '../redux/utils';\n\nexport enum TRADES_ACTION_TYPES {\n    SUBSCRIBE_TO_TRADES = 'TRADES/SUBSCRIBE_TO_TRADES',\n    UNSUBSCRIBE_FROM_TRADES = 'TRADES/UNSUBSCRIBE_FROM_TRADES'\n}\n\nexport interface SubscribeToTradesActionPayload {\n    symbol: string;\n}\n\nexport interface UnsubscribeFromTradesActionPayload {\n    symbol: string;\n}\n\nexport const TradesActions = {\n    subscribeToTrades: createAction<TRADES_ACTION_TYPES.SUBSCRIBE_TO_TRADES, SubscribeToTradesActionPayload>(TRADES_ACTION_TYPES.SUBSCRIBE_TO_TRADES),\n    unsubscribeFromTrades: createAction<TRADES_ACTION_TYPES.UNSUBSCRIBE_FROM_TRADES, UnsubscribeFromTradesActionPayload>(TRADES_ACTION_TYPES.UNSUBSCRIBE_FROM_TRADES)\n};\n\nexport type TradesActions = ActionUnion<typeof TradesActions>;\nexport type SubscribeToTrades = ReturnType<typeof TradesActions.subscribeToTrades>;\nexport type UnsubscribeFromTrades = ReturnType<typeof TradesActions.unsubscribeFromTrades>;\n","import { SELECTION_ACTION_TYPES, SelectCurrencyPair } from './../selection/actions';\nimport { merge, of, from, EMPTY } from 'rxjs';\nimport { Epic, ofType, combineEpics } from 'redux-observable';\nimport { switchMap, take, mergeMap, filter, map, tap, distinctUntilChanged } from 'rxjs/operators';\nimport { Actions } from 'modules/root';\nimport { ConnectionStatus } from 'core/transport/types/ConnectionStatus';\nimport { getCurrencyPairs } from 'modules/reference-data/selectors';\nimport { RefDataActions, REF_DATA_ACTION_TYPES } from 'modules/reference-data/actions';\nimport { Dependencies } from 'modules/redux/store';\nimport { SelectionActions } from 'modules/selection/actions';\nimport { TRANSPORT_ACTION_TYPES, ChangeConnectionStatus } from 'core/transport/actions';\nimport { parseCurrencyPair } from 'modules/reference-data/utils';\nimport { TickerActions } from 'modules/ticker/actions';\nimport { CandlesActions } from 'modules/candles/actions';\nimport { RootState } from './../root';\nimport { APP_ACTION_TYPES, BoostrapApp } from './actions';\nimport { LoadRefDataAck } from './../reference-data/actions';\n\nconst bootstrap: Epic<Actions, Actions, RootState, Dependencies> = (action$, state$, { connection }) =>\n  action$.pipe(\n    ofType<Actions, BoostrapApp>(APP_ACTION_TYPES.BOOTSTRAP_APP),\n    switchMap(() => {\n      console.log('Bootstrap App');\n      connection.connect();\n\n      return action$.pipe(\n        ofType<Actions, ChangeConnectionStatus>(TRANSPORT_ACTION_TYPES.CHANGE_CONNECTION_STATUS),\n        filter(action => action.payload === ConnectionStatus.Connected),\n        switchMap(() => merge(\n          of(RefDataActions.loadRefData()),\n          action$.pipe(\n            ofType<Actions, LoadRefDataAck>(REF_DATA_ACTION_TYPES.LOAD_REF_DATA_ACK),\n            take(1),\n            mergeMap(() => {\n              const currencyPairs = getCurrencyPairs(state$.value);\n              const tickerActions = currencyPairs\n                .map(currencyPair => TickerActions.subscribeToTicker({\n                  symbol: currencyPair\n                }));\n                const candleActions = currencyPairs\n                .map(currencyPair => CandlesActions.subscribeToCandles({ symbol: currencyPair, timeframe: '5m' }));\n\n              return merge(\n                of(SelectionActions.selectCurrencyPair({ currencyPair: currencyPairs[0] })),\n                from(tickerActions),\n                from(candleActions)\n              );\n            })\n          )\n        )));\n    })\n  );\n\nconst updateTitle: Epic<Actions, Actions, RootState, Dependencies> = (action$, state$) =>\n  action$\n    .pipe(\n      ofType(SELECTION_ACTION_TYPES.SELECT_CURRENCY_PAIR),\n      switchMap(action => {\n        const { currencyPair } = (action as SelectCurrencyPair).payload;\n        const [, counter] = parseCurrencyPair(currencyPair);\n\n        return state$\n          .pipe(\n            map(state => state.ticker[currencyPair]),\n            distinctUntilChanged(),\n            filter(ticker => typeof ticker !== 'undefined'),\n            tap(ticker => document.title = `(${ticker.lastPrice?.toFixed(2)} ${counter}) Crypto Trader`),\n            mergeMap(() => EMPTY)\n          );\n      })\n    );\n\nexport default combineEpics(\n  bootstrap,\n  updateTitle\n);","import { EMPTY, merge } from 'rxjs';\nimport { Epic, ofType, combineEpics } from 'redux-observable';\nimport { filter, mergeMap, catchError, timeout, take, concatMap, map } from 'rxjs/operators';\nimport { of } from 'rxjs/internal/observable/of';\nimport { Dependencies } from 'modules/redux/store';\nimport { RootState, Actions } from 'modules/root';\nimport { TRANSPORT_ACTION_TYPES, SendMessage, ReceiveMessage, TransportActions, SubscribeToChannel, UnsubscribeFromChannel } from './actions';\n\nexport const WS_SUBSCRIPTION_TIMEOUT_IN_MS = 5000;\n\nexport const handleSendMessage: Epic<Actions, Actions, RootState, Dependencies> = (action$, state$, { connection }) =>\n  action$.pipe(\n    ofType<Actions, SendMessage>(TRANSPORT_ACTION_TYPES.SEND_MESSAGE),\n    mergeMap(action => {\n      connection.send(JSON.stringify(action.payload));\n      return EMPTY;\n    })\n  );\n\n/*\n    The Bitfinex WS api appears to have some limitations when it comes to subscriptions.\n    Because requests/responses don't have a correlation id, we can't run concurrent requests safely.\n    Therefore, we queue subscription requests and process them sequencially.\n*/\nexport const handleSubscription: Epic<Actions, Actions, RootState, Dependencies> = (action$) => {\n  return action$.pipe(\n    ofType<Actions, SubscribeToChannel | UnsubscribeFromChannel>(TRANSPORT_ACTION_TYPES.SUBSCRIBE_TO_CHANNEL, TRANSPORT_ACTION_TYPES.UNSUBSCRIBE_FROM_CHANNEL),\n    concatMap(rootAction => {\n      const isSubscribing = rootAction.type === TRANSPORT_ACTION_TYPES.SUBSCRIBE_TO_CHANNEL;\n\n      return merge(\n        action$.pipe(\n          ofType<Actions, ReceiveMessage>(TRANSPORT_ACTION_TYPES.RECEIVE_MESSAGE),\n          filter(action => {\n            return (isSubscribing && action.payload.event === 'subscribed' && action.payload.channel === (rootAction as SubscribeToChannel).payload.channel)\n              || (!isSubscribing && action.payload.event === 'unsubscribed')\n              || action.payload.event === 'error'\n          }),\n          take(1),\n          timeout(WS_SUBSCRIPTION_TIMEOUT_IN_MS),\n          map(action => {\n            const receiveMessageAction = action as ReceiveMessage;\n            if (receiveMessageAction.payload.event === 'error') {\n              return isSubscribing\n                ? TransportActions.subscribeToChannelNack({\n                  error: receiveMessageAction.payload.msg\n                })\n                : TransportActions.unsubscribeFromChannelNack();\n            } else {\n              const { channel, chanId: channelId } = receiveMessageAction.payload;\n\n              return isSubscribing\n                ? TransportActions.subscribeToChannelAck({\n                  channel,\n                  channelId,\n                  request: (rootAction as SubscribeToChannel).payload\n                })\n                : TransportActions.unsubscribeFromChannelAck({\n                  channelId\n                });\n            }\n          }),\n          catchError(() => isSubscribing\n            ? of(TransportActions.subscribeToChannelNack({\n              error: 'Timeout'\n            }))\n            : of(TransportActions.unsubscribeFromChannelNack())\n          )\n        ),\n        isSubscribing\n          ? of(TransportActions.sendMessage({\n            event: 'subscribe',\n            ...(rootAction as SubscribeToChannel).payload\n          }))\n          : of(TransportActions.sendMessage({\n            event: 'unsubscribe',\n            chanId: (rootAction as UnsubscribeFromChannel).payload.channelId\n          }))\n      );\n    }),\n\n  );\n}\n\nexport default combineEpics(\n  handleSendMessage,\n  handleSubscription\n);","import { unsubscribeFromBook } from './epics';\nimport { createAction, ActionUnion } from '../redux/utils';\n\nexport enum BOOK_ACTION_TYPES {\n    SUBSCRIBE_TO_BOOK = 'BOOK/SUBSCRIBE_TO_BOOK',\n    UNSUBSCRIBE_FROM_BOOK = 'BOOK/UNSUBSCRIBE_FROM_BOOK'\n}\n\nexport interface SubscribeToBookActionPayload {\n    symbol: string;\n}\n\nexport interface UnsubscribeFromBookActionPayload {\n    symbol: string;\n}\n\nexport const BookActions = {\n    subscribeToBook: createAction<BOOK_ACTION_TYPES.SUBSCRIBE_TO_BOOK, SubscribeToBookActionPayload>(BOOK_ACTION_TYPES.SUBSCRIBE_TO_BOOK),\n    unsubscribeFromBook: createAction<BOOK_ACTION_TYPES.UNSUBSCRIBE_FROM_BOOK, UnsubscribeFromBookActionPayload>(BOOK_ACTION_TYPES.UNSUBSCRIBE_FROM_BOOK)\n};\n\nexport type BookActions = ActionUnion<typeof BookActions>;\nexport type SubscribeToBook = ReturnType<typeof BookActions.subscribeToBook>;\nexport type UnsubscribeFromBook = ReturnType<typeof BookActions.unsubscribeFromBook>;\n","import { createSelector } from 'reselect';\nimport { RootState } from 'modules/root';\n\nconst subscriptionsSelector = (state: RootState) => state.subscriptions;\n\nexport const getSubscriptions = createSelector(\n    subscriptionsSelector,\n    subscriptions => subscriptions\n)\n\nexport const getSubscription = createSelector(\n    getSubscriptions,\n    subscriptions => (channel: string, request: any) => {\n        const channelIds = Object.keys(subscriptions).map(Number);\n\n        return channelIds.find(channelId => {\n            return subscriptions[channelId].channel === channel\n                && Object.keys(request).every(key => request[key] === subscriptions[channelId].request[key]);\n        });\n    }\n)\n\n","import { UnsubscribeFromTrades } from './actions';\nimport { TradesChannel } from 'core/transport/types/Channels';\nimport { map, mergeMap } from 'rxjs/operators';\nimport { Epic, ofType, combineEpics } from 'redux-observable';\nimport { RootState, Actions } from 'modules/root';\nimport { SubscribeToTrades, TRADES_ACTION_TYPES } from 'modules/trades/actions';\nimport { Dependencies } from './../redux/store';\nimport { TransportActions } from 'core/transport/actions';\nimport { getSubscription } from 'core/transport/selectors';\nimport { from } from 'rxjs';\n\nexport const subscribeToTrades: Epic<Actions, Actions, RootState, Dependencies> = (action$) =>\n    action$.pipe(\n        ofType<Actions, SubscribeToTrades>(TRADES_ACTION_TYPES.SUBSCRIBE_TO_TRADES),\n        map(action => {\n            const { symbol } = action.payload;\n            const msg = {\n                channel: 'trades' as TradesChannel,\n                symbol: `t${symbol}`\n            };\n            return TransportActions.subscribeToChannel(msg);\n        })\n    );\n\nexport const unsubscribeFromTrades: Epic<Actions, Actions, RootState, Dependencies> = (action$, state$) =>\n    action$.pipe(\n        ofType<Actions, UnsubscribeFromTrades>(TRADES_ACTION_TYPES.UNSUBSCRIBE_FROM_TRADES),\n        mergeMap(action => {\n            const { symbol } = action.payload;\n            const result: Actions[] = [];\n            const channelId = getSubscription(state$.value)('trades', {\n                symbol: `t${symbol}`\n            });\n            if (typeof channelId !== 'undefined') {\n                result.push(\n                    TransportActions.unsubscribeFromChannel({\n                        channelId\n                    })\n                );\n            } else {\n                console.warn('Failed to find trades subscription');\n            }\n            return from(result);\n        })\n    );\n\nexport default combineEpics(\n    subscribeToTrades,\n    unsubscribeFromTrades\n);","import { Epic, ofType, combineEpics } from 'redux-observable';\nimport { switchMap, map, catchError } from 'rxjs/operators';\nimport { fromFetch } from 'rxjs/fetch';\nimport { of } from 'rxjs';\nimport { Dependencies } from 'modules/redux/store';\nimport { RootState, Actions } from 'modules/root';\nimport { REF_DATA_ACTION_TYPES, RefDataActions, LoadRefData } from './actions';\n\nexport const loadRefData: Epic<Actions, Actions, RootState, Dependencies> = (action$) =>\n  action$.pipe(\n    ofType<Actions, LoadRefData>(REF_DATA_ACTION_TYPES.LOAD_REF_DATA),\n    switchMap(() => {\n      return fromFetch('data/currencyPairs.json')\n        .pipe(\n          switchMap(response => response.json()),\n          map(result => RefDataActions.loadRefDataAck({\n            currencyPairs: result as string[]\n          })),\n          catchError(() => of(RefDataActions.loadRefDataNack()))\n        );\n    })\n  );\n\n\nexport default combineEpics(\n  loadRefData\n);","import { map } from 'rxjs/operators';\nimport { Epic, ofType, combineEpics } from 'redux-observable';\nimport { TransportActions } from 'core/transport/actions';\nimport { TickerChannel } from 'core/transport/types/Channels';\nimport { RootState, Actions } from 'modules/root';\nimport { SubscribeToTickerAction, TICKER_ACTION_TYPES } from './actions';\nimport { Dependencies } from './../redux/store';\n\nexport const subscribeToTicker: Epic<Actions, Actions, RootState | undefined, Dependencies | undefined> = (action$) =>\n    action$.pipe(\n        ofType<Actions, SubscribeToTickerAction>(TICKER_ACTION_TYPES.SUBSCRIBE_TO_TICKER),\n        map(action => {\n            const { symbol } = action.payload;\n            const msg = {\n                channel: 'ticker' as TickerChannel,\n                symbol: `t${symbol}`\n            };\n            return TransportActions.subscribeToChannel(msg);\n        })\n    );\n\nexport default combineEpics(\n    subscribeToTicker\n);","import { from } from 'rxjs';\nimport { map, mergeMap } from 'rxjs/operators';\nimport { Epic, ofType, combineEpics } from 'redux-observable';\nimport { RootState, Actions } from 'modules/root';\nimport { getSubscription } from 'core/transport/selectors';\nimport { CandlesChannel } from 'core/transport/types/Channels';\nimport { TransportActions } from 'core/transport/actions';\nimport { SubscribeToCandles, CANDLES_ACTION_TYPES, UnsubscribeFromCandles } from './actions';\nimport { Dependencies } from './../redux/store';\n\nexport const subscribeToCandles: Epic<Actions, Actions, RootState | undefined, Dependencies | undefined> = (action$) =>\n    action$.pipe(\n        ofType<Actions, SubscribeToCandles>(CANDLES_ACTION_TYPES.SUBSCRIBE_TO_CANDLES),\n        map(action => {\n            const { symbol, timeframe } = action.payload;\n            const msg = {\n                channel: 'candles' as CandlesChannel,\n                key: ['trade', timeframe, `t${symbol}`].join(':')\n            };\n            return TransportActions.subscribeToChannel(msg);\n        })\n    );\n\n\nexport const unsubscribeFromCandles: Epic<Actions, Actions, RootState, Dependencies> = (action$, state$) =>\n    action$.pipe(\n        ofType<Actions, UnsubscribeFromCandles>(CANDLES_ACTION_TYPES.UNSUBSCRIBE_FROM_CANDLES),\n        mergeMap(action => {\n            const { symbol, timeframe } = action.payload;\n\n            const result: Actions[] = [];\n            const channelId = getSubscription(state$.value)('candles', {\n                key: ['trade', timeframe, `t${symbol}`].join(':')\n            });\n            if (typeof channelId !== 'undefined') {\n                result.push(\n                    TransportActions.unsubscribeFromChannel({\n                        channelId\n                    })\n                );\n            } else {\n                console.warn('Failed to find candles subscription');\n            }\n            return from(result);\n        })\n    );\n\nexport default combineEpics(\n    subscribeToCandles,\n    unsubscribeFromCandles\n);","import { createSelector } from 'reselect';\nimport { RootState } from 'modules/root';\n\nconst selectionSelector = (state: RootState) => state.selection;\n\nexport const getSelectedCurrencyPair = createSelector(\n    selectionSelector,\n    selection => selection.currencyPair\n)\n","import { from } from 'rxjs';\nimport { Epic, ofType, combineEpics } from 'redux-observable';\nimport { switchMap, pairwise, withLatestFrom } from 'rxjs/operators';\nimport { Actions } from 'modules/root';\nimport { TradesActions } from 'modules/trades/actions';\nimport { CandlesActions } from 'modules/candles/actions';\nimport { BookActions } from 'modules/book/actions';\nimport { RootState } from './../root';\nimport { Dependencies } from './../redux/store';\nimport { SELECTION_ACTION_TYPES, SelectCurrencyPair } from './actions';\nimport { getSelectedCurrencyPair } from './selectors';\n\nconst handleSelection: Epic<Actions, Actions, RootState, Dependencies> = (action$, state$) => {\n  const statePairs$ = state$.pipe(pairwise());\n  return action$.pipe(\n    ofType<Actions, SelectCurrencyPair>(SELECTION_ACTION_TYPES.SELECT_CURRENCY_PAIR),\n    withLatestFrom(statePairs$),\n    switchMap(([action, [oldState, newState]]) => {\n      const oldCurrencyPair = getSelectedCurrencyPair(oldState);\n      const { currencyPair } = action.payload;\n      const unsubscribeActions = [];\n      if (oldCurrencyPair) {\n        unsubscribeActions.push(\n          CandlesActions.unsubscribeFromCandles({symbol: oldCurrencyPair, timeframe: '1m'}),\n          TradesActions.unsubscribeFromTrades({ symbol: oldCurrencyPair }),\n          BookActions.unsubscribeFromBook({ symbol: oldCurrencyPair })\n        );\n      }\n\n      const subscribeActions = [\n        CandlesActions.subscribeToCandles({ symbol: currencyPair, timeframe: '1m' }),\n        TradesActions.subscribeToTrades({ symbol: currencyPair }),\n        BookActions.subscribeToBook({ symbol: currencyPair })\n      ]\n\n      return from([\n        ...unsubscribeActions,\n        ...subscribeActions\n      ]);\n\n    })\n  );\n}\n\nexport default combineEpics(\n  handleSelection\n);","import { from } from 'rxjs';\nimport { map, mergeMap } from 'rxjs/operators';\nimport { Epic, ofType, combineEpics } from 'redux-observable';\nimport { getSubscription } from 'core/transport/selectors';\nimport { TransportActions } from 'core/transport/actions';\nimport { BookChannel } from 'core/transport/types/Channels';\nimport { RootState, Actions } from 'modules/root';\nimport { SubscribeToBook, BOOK_ACTION_TYPES, UnsubscribeFromBook } from './actions';\nimport { Dependencies } from './../redux/store';\n\nexport const subscribeToBook: Epic<Actions, Actions, RootState | undefined, Dependencies | undefined> = (action$) =>\n    action$.pipe(\n        ofType(BOOK_ACTION_TYPES.SUBSCRIBE_TO_BOOK),\n        map(action => {\n            const { symbol } = (action as SubscribeToBook).payload;\n            const msg = {\n                channel: 'book' as BookChannel,\n                symbol: `t${symbol}`,\n                prec: 'R0'\n            };\n            return TransportActions.subscribeToChannel(msg);\n        })\n    );\n\n\nexport const unsubscribeFromBook: Epic<Actions, Actions, RootState, Dependencies> = (action$, state$) =>\naction$.pipe(\n    ofType(BOOK_ACTION_TYPES.UNSUBSCRIBE_FROM_BOOK),\n    mergeMap(action => {\n        const { symbol } = (action as UnsubscribeFromBook).payload;\n        const result: Actions[] = [];\n        const channelId = getSubscription(state$.value)('book', {\n            symbol: `t${symbol}`\n        });\n        if (typeof channelId !== 'undefined') {\n            result.push(\n                TransportActions.unsubscribeFromChannel({\n                    channelId\n                })\n            );\n        } else {\n            console.warn('Failed to find book subscription');\n        }\n        return from(result);\n    })\n);\n\nexport default combineEpics(\n    subscribeToBook,\n    unsubscribeFromBook\n);","import { ReceiveMessage } from './actions';\n\nexport function isHeartbeat(action: ReceiveMessage) {\n    return Array.isArray(action.payload) && action.payload[1] === 'hb';\n}\n\nexport function isSubscriptionMessage(action: ReceiveMessage) {\n    return action.payload.event === 'subscribed';\n}\n\nexport function isUnsubscriptionMessage(action: ReceiveMessage) {\n    return action.payload.event === 'unsubscribed';\n}\n\nexport function isErrorMessage(action: ReceiveMessage) {\n    return action.payload.event === 'error';\n}\n","import { createReducer } from 'modules/redux/utils';\nimport { TRANSPORT_ACTION_TYPES } from 'core/transport/actions';\nimport { isHeartbeat, isSubscriptionMessage, isUnsubscriptionMessage, isErrorMessage } from 'core/transport/utils';\nimport { ReceiveMessage } from 'core/transport/actions';\nimport { Actions } from './../root';\nimport { Trade } from './types/Trade';\n\ntype SymbolState = Trade[];\n\nexport const MAX_TRADES = 100;\n\nexport interface TradesState {\n    [currencyPair: string]: SymbolState;\n}\n\nconst initialState: TradesState = {\n}\n\nfunction snapshotReducer(state: SymbolState, action: ReceiveMessage) {\n    const [, trades] = action.payload;\n    return trades.sort((a: number[], b: number[]) => b[1] - a[1]).map(([id, timestamp, amount, price]: number[]) => ({\n        id,\n        timestamp,\n        amount,\n        price\n    }));\n}\n\nfunction updateReducer(state: SymbolState = [], action: ReceiveMessage) {\n    const [, , trade] = action.payload;\n    const [id, timestamp, amount, price] = trade;\n    const existingTradeIndex = state.findIndex(x => x.id === id);\n    const newOrUpdatedTrade = {\n        id,\n        timestamp,\n        amount,\n        price\n    };\n\n    if (existingTradeIndex >= 0) {\n        const updatedState = state.slice();\n        updatedState.splice(existingTradeIndex, 1, newOrUpdatedTrade);\n        return updatedState;\n    } else {\n        return [\n            newOrUpdatedTrade,\n            ...state\n        ];\n    }\n}\n\nconst receiveMessageReducer = (state: TradesState, action: ReceiveMessage) => {\n    if (isHeartbeat(action) || isSubscriptionMessage(action) || isErrorMessage(action)) {\n        return state;\n    }\n\n    const { channel, request } = action.meta || {};\n    if (channel === 'trades') {\n        const { symbol } = request;    \n        const currencyPair = symbol.slice(1);\n        if (isUnsubscriptionMessage(action)) {\n            const updatedState = {\n                ...state\n            };\n            delete updatedState[currencyPair];\n            return updatedState;\n        }     \n\n        const symbolReducer = Array.isArray(action.payload[1]) ? snapshotReducer : updateReducer;\n        const result = symbolReducer(state[currencyPair], action);\n\n        return {\n            ...state,\n            [currencyPair]: result.slice(0, MAX_TRADES) // only keep the top x trades, so we don't eventually fill up the memory\n        };\n    }\n\n    return state;\n}\n\nexport const tradesReducer = createReducer<TradesState, Actions>({\n    [TRANSPORT_ACTION_TYPES.RECEIVE_MESSAGE]: receiveMessageReducer\n}, initialState);\n\nexport default tradesReducer;","import { createReducer } from 'modules/redux/utils';\nimport { Actions } from 'modules/root';\nimport { TRANSPORT_ACTION_TYPES } from 'core/transport/actions';\nimport { SubscribeToChannelAck, UnsubscribeFromChannelAck } from './actions';\n\nexport interface SubscriptionState {\n    [key: number]: { channel: string, request: any };\n}\n\nconst initialState: SubscriptionState = {\n};\n\nconst subscribeToChannelAckReducer = (state: SubscriptionState, action: SubscribeToChannelAck) => {\n    const { request, channel, channelId } = action.payload;\n\n    return {\n        ...state,\n        [channelId]: {\n            channel,\n            request\n        }\n    };\n};\n\nconst unsubscribeFromChannelAckReducer = (state: SubscriptionState, action: UnsubscribeFromChannelAck) => {\n    const { channelId } = action.payload;\n\n    const updatedState = {\n        ...state\n    };\n    delete updatedState[channelId];\n    return updatedState;\n}\n\nexport const subscriptionsReducer = createReducer<SubscriptionState, Actions>({\n    [TRANSPORT_ACTION_TYPES.SUBSCRIBE_TO_CHANNEL_ACK]: subscribeToChannelAckReducer,\n    [TRANSPORT_ACTION_TYPES.UNSUBSCRIBE_FROM_CHANNEL_ACK]: unsubscribeFromChannelAckReducer\n}, initialState);\n\nexport default subscriptionsReducer;","import { Actions } from 'modules/root';\nimport { REF_DATA_ACTION_TYPES, LoadRefDataAck } from './actions';\nimport { createReducer } from 'modules/redux/utils';\n\ninterface RefDataState {\n    currencyPairs: string[];\n}\n\nconst initialState: RefDataState = {\n    currencyPairs: []\n}\n\nconst loadRefDataReducer = (state: RefDataState, action: LoadRefDataAck) => {\n    const { currencyPairs } = action.payload;\n\n    return {\n        ...state,\n        currencyPairs\n    };\n}\n\nexport const refDataReducer = createReducer<RefDataState, Actions>({\n    [REF_DATA_ACTION_TYPES.LOAD_REF_DATA_ACK]: loadRefDataReducer\n}, initialState);\n\nexport default refDataReducer;","import { createReducer } from 'modules/redux/utils';\nimport { Actions } from './../root';\nimport { TRANSPORT_ACTION_TYPES, ReceiveMessage } from 'core/transport/actions';\nimport { isHeartbeat } from 'core/transport/utils';\nimport { Ticker } from './types/Ticker';\n\nexport interface TickerState {\n    [symbol: string]: Ticker;\n}\n\nconst initialState: TickerState = {\n}\n\nconst receiveMessageReducer = (state: TickerState, action: ReceiveMessage) => {\n    if (isHeartbeat(action)) {\n        return state;\n    }\n\n    const { channel, request } = action.meta || {};\n    if (channel === 'ticker') {\n        const { symbol } = request;                \n        const currencyPair = symbol.slice(1);\n        const [, [bid, bidSize, ask, askSize, dailyChange, dailyChangeRelative, lastPrice, volume, high, low]] = action.payload;\n\n        return {\n            ...state,\n            [currencyPair]: {\n                currencyPair,\n                bid,\n                bidSize,\n                ask,\n                askSize,\n                dailyChange,\n                dailyChangeRelative,\n                lastPrice,\n                volume,\n                high,\n                low\n            }\n        };\n    }\n\n    return state;\n}\n\nexport const tickerReducer = createReducer<TickerState, Actions>({\n    [TRANSPORT_ACTION_TYPES.RECEIVE_MESSAGE]: receiveMessageReducer\n}, initialState);\n\nexport default tickerReducer;","export const getLookupKey = (currencyPair: string, timeframe: string) => [currencyPair, timeframe].join(':');","import { createReducer } from 'modules/redux/utils';\nimport { TRANSPORT_ACTION_TYPES } from 'core/transport/actions';\nimport { isHeartbeat, isSubscriptionMessage, isUnsubscriptionMessage, isErrorMessage } from 'core/transport/utils';\nimport { ReceiveMessage } from 'core/transport/actions';\nimport { getLookupKey } from './utils';\nimport { Actions } from './../root';\nimport { Candle } from './types/Candle';\n\nconst MAX_CANDLES = 100;\n\ntype SymbolState = Candle[];\n\nexport interface CandlesState {\n    [currencyPair: string]: SymbolState;\n}\n\nconst initialState: CandlesState = {\n}\n\nfunction snapshotReducer(state: SymbolState, action: ReceiveMessage) {\n    const [, candles] = action.payload;\n    return candles.map(([timestamp, open, close, high, low, volume]: number[]) => ({\n        timestamp, open, close, high, low, volume\n    })).sort((a: Candle, b: Candle) => b.timestamp - a.timestamp);\n}\n\nfunction updateReducer(state: SymbolState = [], action: ReceiveMessage) {\n    const [, candle] = action.payload;\n    const [timestamp, open, close, high, low, volume] = candle;\n\n    return [\n        {\n            timestamp,\n            open,\n            close,\n            high,\n            low,\n            volume\n        },\n        ...state\n    ];\n}\n\nconst receiveMessageReducer = (state: CandlesState, action: ReceiveMessage) => {\n    if (isHeartbeat(action) || isSubscriptionMessage(action) || isErrorMessage(action)) {\n        return state;\n    }\n\n    const { channel, request } = action.meta || {};\n    if (channel === 'candles') {\n        const { key } = request;\n        const [, timeframe, symbol] = key.split(':');\n        const currencyPair = symbol.slice(1);\n        const lookupKey = getLookupKey(currencyPair, timeframe);\n\n        if (isUnsubscriptionMessage(action)) {\n            const updatedState = {\n                ...state\n            };\n            delete updatedState[lookupKey];\n            return updatedState;\n        }\n\n        const symbolReducer = Array.isArray(action.payload[1][0]) ? snapshotReducer : updateReducer;\n        const result = symbolReducer(state[lookupKey], action);\n\n        return {\n            ...state,\n            [lookupKey]: result.slice(0, MAX_CANDLES) // restrict number of candles so we don't eventully fill up the memory\n        };\n    }\n\n    return state;\n}\n\nexport const candlesReducer = createReducer<CandlesState, Actions>({\n    [TRANSPORT_ACTION_TYPES.RECEIVE_MESSAGE]: receiveMessageReducer\n}, initialState);\n\nexport default candlesReducer;","import { Actions } from 'modules/root';\nimport { SELECTION_ACTION_TYPES } from './actions';\n\ninterface SelectionState {\n    currencyPair?: string;\n}\n\nconst initialState: SelectionState = {\n}\n\nexport function selectionReducer(\n    state = initialState,\n    action: Actions\n) {\n    switch (action.type) {\n        case SELECTION_ACTION_TYPES.SELECT_CURRENCY_PAIR: {\n            const { currencyPair } = action.payload;\n\n            return {\n                ...state,\n                currencyPair\n            }\n        }\n\n        default:\n            return state;\n    }\n}\n\nexport default selectionReducer;","import { Actions } from 'modules/root';\nimport { TRANSPORT_ACTION_TYPES } from 'core/transport/actions';\nimport { createReducer } from 'modules/redux/utils';\nimport { isHeartbeat, isSubscriptionMessage, isUnsubscriptionMessage, isErrorMessage } from 'core/transport/utils';\nimport { ReceiveMessage } from 'core/transport/actions';\nimport { Order } from './types/Order';\n\ntype SymbolState = Order[];\n\nexport interface BookState {\n    [currencyPair: string]: SymbolState;\n}\n\nconst initialState: BookState = {\n}\n\nfunction snapshotReducer(state: SymbolState, action: ReceiveMessage) {\n    const [, orders] = action.payload;\n    return orders.map(([id, price, amount]: any[]) => ({\n        id,\n        price,\n        amount\n    }));\n}\n\nfunction updateReducer(state: SymbolState = [], action: ReceiveMessage) {\n    const [, order] = action.payload;\n    const [id, price, amount] = order;\n    const existingOrderIndex = state.findIndex(x => x.id === id);\n    const newOrUpdatedOrder = {\n        id,\n        price,\n        amount\n    };\n\n    if (price === 0 && existingOrderIndex >= 0) {\n        // remove\n        const updatedState = state.slice();\n        updatedState.splice(existingOrderIndex, 1);\n        return updatedState;\n    } else if (existingOrderIndex >= 0) {\n        // update\n        const updatedState = state.slice();\n        updatedState.splice(existingOrderIndex, 1, newOrUpdatedOrder);\n        return updatedState;\n    } else {\n        // add\n        return [\n            ...state,\n            newOrUpdatedOrder\n        ];\n    }\n}\n\nconst receiveMessageReducer = (state: BookState, action: ReceiveMessage) => {\n    if (isHeartbeat(action) || isSubscriptionMessage(action) || isErrorMessage(action)) {\n        return state;\n    }\n\n    const { channel, request } = action.meta || {};\n\n    if (channel === 'book') {\n        const { symbol } = request;    \n        const currencyPair = symbol.slice(1);  \n\n        if (isUnsubscriptionMessage(action)) {\n            const updatedState = {\n                ...state\n            };\n            delete updatedState[currencyPair];\n            return updatedState;\n        }\n\n        const symbolReducer = Array.isArray(action.payload[1][0]) ? snapshotReducer : updateReducer;\n        const result = symbolReducer(state[currencyPair], action);\n        return {\n            ...state,\n            [currencyPair]: result\n        };\n    }\n\n    return state;\n}\n\nexport const bookReducer = createReducer<BookState, Actions>({\n    [TRANSPORT_ACTION_TYPES.RECEIVE_MESSAGE]: receiveMessageReducer\n}, initialState);\n\nexport default bookReducer;","import { combineEpics } from 'redux-observable';\nimport { combineReducers } from 'redux';\nimport { BookActions } from './book/actions';\nimport { SelectionActions } from './selection/actions';\nimport { CandlesActions } from './candles/actions';\nimport { TickerActions } from './ticker/actions';\nimport { RefDataActions } from './reference-data/actions';\nimport appEpics from './app/epics';\nimport transportEpics from '../core/transport/epics';\nimport tradeEpics from './trades/epics';\nimport refDataEpics from './reference-data/epics';\nimport tickerEpics from './ticker/epics';\nimport candlesEpics from './candles/epics';\nimport selectionEpics from './selection/epics';\nimport bookEpics from './book/epics';\nimport { AppActions } from './app/actions';\nimport { TradesActions } from './trades/actions';\nimport { TransportActions } from 'core/transport/actions';\nimport { tradesReducer } from './trades/reducer';\nimport { subscriptionsReducer } from 'core/transport/reducer';\nimport { refDataReducer } from './reference-data/reducer';\nimport { tickerReducer } from './ticker/reducer';\nimport { candlesReducer } from './candles/reducer';\nimport { selectionReducer } from './selection/reducer';\nimport { bookReducer } from './book/reducer';\n\nexport const rootEpic = combineEpics(\n  appEpics,\n  refDataEpics,\n  transportEpics,\n  tradeEpics,\n  tickerEpics,\n  candlesEpics,\n  selectionEpics,\n  bookEpics\n);\n\nexport const rootReducer = combineReducers({\n  refData: refDataReducer,\n  subscriptions: subscriptionsReducer,\n  trades: tradesReducer,\n  ticker: tickerReducer,\n  candles: candlesReducer,\n  selection: selectionReducer,\n  book: bookReducer\n});\n\nexport type Actions = \n    AppActions\n  | RefDataActions\n  | TransportActions\n  | TradesActions\n  | TickerActions\n  | CandlesActions\n  | SelectionActions\n  | BookActions;\n\nexport type RootState = ReturnType<typeof rootReducer>;","import { createStore, applyMiddleware, compose } from 'redux';\nimport { createEpicMiddleware } from 'redux-observable';\nimport { ConnectionStatus } from 'core/transport/types/ConnectionStatus';\nimport createWsMiddleware from 'core/transport/middleware';\nimport { WsConnectionProxy } from 'core/transport/WsConnectionProxy';\nimport { Connection } from 'core/transport/Connection';\nimport { TransportActions } from 'core/transport/actions';\nimport { Actions, RootState } from './../root';\nimport { rootEpic, rootReducer } from '../root';\n\nconst connectionProxy = new WsConnectionProxy('wss://api-pub.bitfinex.com/ws/2');\n\nconst connection = new Connection(connectionProxy);\n\nconst dependencies = {\n  connection\n};\n\nexport type Dependencies = typeof dependencies;\n\nconst epicMiddleware = createEpicMiddleware<\n  Actions,\n  Actions,\n  RootState,\n  Dependencies\n>({\n  dependencies\n});\n\nconst wsMiddleware = createWsMiddleware({connection});\n\nconst composeEnhancers = (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nexport default function configureStore() {\n  const store = createStore(\n    rootReducer,\n    composeEnhancers(\n      applyMiddleware(wsMiddleware, epicMiddleware)\n    )\n  );\n\n  connection.onConnect(() => {\n    store.dispatch(TransportActions.changeConnectionStatus(ConnectionStatus.Connected));\n    console.log('Connected');\n  });\n\n  epicMiddleware.run(rootEpic);\n\n  return store;\n}","import { useMemo, useEffect, useState } from 'react';\nimport { throttle } from 'lodash';\n\nexport const useThrottleFn = <T extends (...args: any) => any>(\n  fn: T,\n  ms = 1000,\n) => {\n  const throttledFn = useMemo(() => {\n    return throttle(fn, ms);\n  }, [fn, ms]);\n\n  // fn may call setState.\n  useEffect(() => {\n    return () => {\n      throttledFn.cancel();\n    };\n  }, [throttledFn]);\n  return throttledFn;\n};\n\nexport const useThrottle = <T>(value: T, ms = 1000) => {\n    const [throttledValue, setThrottledValue] = useState(value);\n    const setThrottledValueThrottled = useThrottleFn(setThrottledValue, ms);\n    setThrottledValueThrottled(value);\n    return throttledValue;\n  };","import { formatPrice, formatAmount, formatVolume, formatTime } from 'modules/reference-data/utils';\n\nexport const priceFormatter = (params: {value: number}) => formatPrice(params.value);\n\nexport const amountFormatter = (params: {value: number}) => formatAmount(params.value);\n\nexport const volumeFormatter = (params: {value: number}) => formatVolume(params.value);\n\nexport const timeFormatter = (params: { value: number}) => formatTime(params.value);","import styled from 'styled-components';\n\nexport const Container = styled.div`\n    width: 100%;\n    height: 100%;\n    font-family: FiraSans-Light;\n`;\n","const Palette = {\n    Bid: '#00AD08',\n    Ask: '#FF264D',\n    BidTransparent: 'rgba(0, 173, 8, 0.2)',\n    AskTransparent: 'rgba(255, 38, 77, 0.2)',\n    Positive: '#00AD08',\n    Negative: '#FF264D',\n    Orange: '#FFA41B',\n    White: '#FFF',\n    BackgroundColor: '#222',\n    Label: 'rgba(245, 245, 245, 0.64)',\n    Border: '#424242',\n    LightGray: 'rgba(245, 245, 245, 0.64)',\n    DarkGray: '#63666D'\n};\n\nexport default Palette;","import React, { FC } from 'react';\nimport { AgGridReact } from 'ag-grid-react';\nimport { ColDef } from 'ag-grid-community';\nimport { useThrottle } from 'core/hooks/useThrottle';\nimport { priceFormatter, amountFormatter, timeFormatter } from 'modules/ag-grid/formatter';\nimport { Trade } from '../../types/Trade';\nimport { Container } from './Trades.styled';\nimport Palette from 'theme/style';\n\nexport interface Props {\n    trades: Trade[];\n}\n\nconst Trades: FC<Props> = props => {\n    const { trades } = props;\n    const throttledTrades = useThrottle<Trade[]>(trades, 500);\n\n    const columnDefs: ColDef[] = [{\n        headerName: 'Id',\n        field: 'id',\n        hide: true\n    }, {\n        headerName: 'Amount',\n        field: 'amount',\n        valueFormatter: params => amountFormatter({value: Math.abs(params.value)}),\n        \n    }, {\n        headerName: 'Price',\n        field: 'price',\n        cellStyle: params => {\n            return {\n                color: params.value < 0 ? Palette.Ask : Palette.Bid\n            }\n        },\n        valueFormatter: priceFormatter\n    }, {\n        headerName: 'Time',\n        field: 'timestamp',\n        valueFormatter: timeFormatter,\n        cellStyle: () => ({\n            color: Palette.LightGray\n        })\n    }];\n\n    return (\n        <Container className='ag-theme-balham-dark'>\n            <AgGridReact\n                columnDefs={columnDefs}\n                rowData={throttledTrades}\n                deltaRowDataMode={true}\n                getRowNodeId={data => data.id}\n                onGridReady={event => event.api.sizeColumnsToFit()}\n            >\n            </AgGridReact>\n        </Container>\n    );\n}\n\nexport default Trades;","import { createSelector } from 'reselect';\nimport { memoize } from 'lodash';\nimport { RootState } from 'modules/root';\n\nconst tradesSelector = (state: RootState) => state.trades;\n\nexport const getTrades = createSelector(\n    tradesSelector,\n    trades => memoize(\n        (symbol: string) => trades[symbol]\n    )\n)\n","import Trades from './Trades.container';\n\nexport default Trades;","import { connect } from 'react-redux';\nimport { RootState } from 'modules/root';\nimport Trades, { Props } from './Trades'\nimport { getTrades } from '../../selectors';\nimport { getSelectedCurrencyPair } from 'modules/selection/selectors';\n\nconst mapStateToProps = (state: RootState): Props => {\n    const selectedCurrencyPair = getSelectedCurrencyPair(state);\n    const trades = selectedCurrencyPair ? getTrades(state)(selectedCurrencyPair) : [];\n\n    return {\n        trades\n    };\n}\n\nexport default connect(mapStateToProps)(Trades);","import { createSelector } from 'reselect';\nimport { memoize } from 'lodash';\nimport { RootState } from 'modules/root';\nimport { getLookupKey } from './utils';\n\nexport const candlesSelector = (state: RootState) => state.candles;\n\nexport const getCandles = createSelector(\n    candlesSelector,\n    candles => memoize(\n        (currencyPair: string, timeframe: string) => candles[getLookupKey(currencyPair, timeframe)]\n    )\n)\n","import { createSelector } from 'reselect';\nimport { memoize, range } from 'lodash';\nimport { RootState } from 'modules/root';\nimport { getCurrencyPairs } from 'modules/reference-data/selectors';\nimport { candlesSelector } from 'modules/candles/selectors';\nimport { getSelectedCurrencyPair } from 'modules/selection/selectors';\nimport { getValueAt } from 'core/utils';\nimport { getLookupKey } from './../candles/utils';\n\nconst tickerSelector = (state: RootState) => state.ticker;\n\nexport const getTicker = createSelector(\n    tickerSelector,\n    ticker => memoize(\n        (symbol: string) => ticker[symbol]\n    )\n);\n\nexport const getTickers = createSelector(\n    getCurrencyPairs,\n    tickerSelector,\n    (currencyPairs, ticker) => currencyPairs.map(currencyPair => ({\n        currencyPair,\n        ...ticker[currencyPair]\n    }))\n);\n\nexport const getVisibleCurrencyPairTickers = createSelector(\n    getCurrencyPairs,\n    getSelectedCurrencyPair,\n    (allCurrencyPairs, selectedCurrencyPair) => {\n        let currencyPairs: string[] = [];\n\n        const selectedCurrencyPairIndex = allCurrencyPairs.indexOf(selectedCurrencyPair || '');\n\n        // Pick a few currency pairs on each side of the selected one\n        if (selectedCurrencyPairIndex >= 0) {\n            currencyPairs = range(selectedCurrencyPairIndex - 2, selectedCurrencyPairIndex + 3)\n                .map(index => getValueAt(allCurrencyPairs)(index));\n        }\n\n        return {\n            currencyPairs,\n            selectedCurrencyPairIndex\n        };\n    }\n)\n\nexport const getTickersWithPrices = createSelector(\n    getTickers,\n    candlesSelector,\n    (tickers, candles) => {\n        return tickers.map(ticker => ({\n            ...ticker,\n            prices: (candles[getLookupKey(ticker.currencyPair, '5m')] || []).map(ticker => ticker.close)\n        }))\n    }\n)\n","/*\n    Safe way to retrieve a value from an array\n\n    Index can be any number\n*/\nexport const getValueAt = (values: any[]) => (index: number) => values[(index % values.length + values.length) % values.length];","import { useEffect, useRef } from 'react';\n\nexport const usePrevious = (val: any) => {\n    const ref = useRef();\n\n    useEffect(() => {\n        ref.current = val;\n    }, [val]);\n\n    return ref.current;\n}","import styled from 'styled-components';\nimport Palette from 'theme/style';\n\nexport const Container = styled.div<{\n    isActive: boolean;\n}>`\n    cursor: pointer;\n    display: grid;\n    grid-template-rows: 25px 1fr;\n    height: 50px;\n    grid-template-columns: repeat(2, 1fr);\n    grid-template-areas: \n        \"currencyPair price\"\n        \"relativeChange change\";\n    font-size: 12px;\n    padding: 5px 10px;\n    border: 1px solid ${({isActive}) => isActive ? Palette.Orange : Palette.Border};\n\n    &:hover {\n        background-color: #2d3436;\n    }\n`;\n\nexport const CurrencyPair = styled.div`\n    color: ${Palette.White};\n    grid-area: currencyPair;\n`;\n\nexport const Price = styled.div`\n    color: ${Palette.White};\n    grid-area: price;\n    margin-right: 0;\n    margin-left: auto;\n`;\n\nexport const RelativeChange = styled.div<{\n    isPositive: boolean;\n}>`\n    grid-area: relativeChange;\n    font-size: 18px;\n    color: ${({isPositive}) => isPositive ? Palette.Positive : Palette.Negative};\n    display: flex;\n    font-family: FiraSans-Medium;\n`;\n\nexport const Change = styled.div<{\n    isPositive: boolean;\n}>`\n    grid-area: change;\n    margin-right: 0;\n    margin-left: auto;\n    color: ${({isPositive}) => isPositive ? Palette.Positive : Palette.Negative};\n`;","import styled from 'styled-components';\nimport { range } from 'lodash';\nimport { Container as TickerContainer } from '../Ticker/Ticker.styled';\n\nexport type ScrollDirection = 'left' | 'right';\n\nexport const Container = styled.div`\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));\n`;\n\nexport const TickerWrapper = styled.div<{\n    index: number;\n    itemCount: number;\n    direction: ScrollDirection;\n}>`\n\n    ${({itemCount}) => {\n        const animations = range(0, itemCount)\n        .map(index => {\n            const indexThreshold = Math.floor(itemCount / 2);\n            const val = index <= indexThreshold\n                 ? index\n                 : indexThreshold - Math.abs(indexThreshold - index);\n            const scaleFactor = 1 - ((indexThreshold - val) / 10);\n\n            return `\n            @keyframes slide-in-${index} {\n                100% { transform: scale(${scaleFactor}, ${scaleFactor}) translateX(0%);; }\n            }\n            `;\n        });\n\n        return animations.reduce((acc, a) => acc += a, '');\n    }}\n\n    ${TickerContainer} {\n        animation: ${({index}) => `slide-in-${index} 0.5s forwards;`};\n        transform: ${({direction}) => `translateX(${direction === 'left' ? 100 : -100}%);`};\n    }\n`;","import styled from 'styled-components';\nimport Palette from '../../../theme/style';\n\nexport const Content = styled.div`\n    display: flex;\n`;\n\nexport const IdenticalPart = styled.div`\n\n`;\n\nexport const ChangedPart = styled.div`\n    color: ${Palette.Orange};\n`;","import React, { FC, useEffect, useState, createRef } from 'react';\nimport { usePrevious } from 'core/hooks/usePrevious';\nimport { Content, IdenticalPart } from './UpdateHightlight.styled';\nimport Palette from 'theme/style';\n\nexport const RESET_HIGHLIGHT_AFTER_MS = 1500;\n\nexport interface IProps {\n    value?: string | null;\n}\n\nexport const calculateParts = (value: string, prevValue: string) => {\n    if (!value || !prevValue) {\n        return [value, ''];\n    }\n    const length = Math.min(value.length, prevValue.length);\n    let index = 0;\n    for (let i = 0; i < length; i++) {\n        if (value[i] === prevValue[i]) {\n            index++;\n        } else {\n            break;\n        }\n    }\n    return [value.slice(0, index), value.slice(index, value.length)];\n};\n\nconst UpdateHighlight: FC<IProps> = props => {\n    const changedPartRef = createRef<HTMLDivElement>();\n    const { value } = props;\n    const prev = usePrevious(value);\n    const [[identicalPart, changedPart], setParts] = useState<string[]>([]);\n\n    useEffect(() => {\n        setParts(calculateParts(value || '', prev || ''));\n        let animation: Animation | undefined = undefined;\n        if (typeof changedPartRef.current?.animate === 'function') {\n            animation = changedPartRef.current.animate([\n                // keyframes\n                { color: Palette.White },\n                { color: Palette.Orange },\n                { color: Palette.White }\n            ], {\n                duration: 500,\n                iterations: 2\n            });\n        }\n\n        const timeoutId = setTimeout(() => {\n            setParts([value || '', '']);\n            if (animation) {\n                animation.cancel();\n            }\n        }, RESET_HIGHLIGHT_AFTER_MS);\n\n        return () => clearTimeout(timeoutId);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [value]);\n\n    return (\n        <Content>\n            <IdenticalPart>{identicalPart}</IdenticalPart>\n            <div ref={changedPartRef}>{changedPart}</div>\n        </Content>\n    );\n}\n\nexport default UpdateHighlight;","import styled from 'styled-components';\n\nexport const Icon = styled.i`\n    font-size: 16px;\n    line-height: 20px;\n    width: 20px;\n`","import TrendIndicator from './TrendIndicator';\n\nexport default TrendIndicator;","import React, { FC, useEffect, useState } from 'react';\nimport { Icon } from './TrendIndicator.styled';\n\nconst SHOW_ICON_FOR_X_MS = 5000;\n\nexport interface Props {\n    value: number;\n}\n\nconst TrendIndicator: FC<Props> = props => {\n    const { value } = props;\n    const [isHidden, setIsHidden] = useState(true);\n\n    useEffect(() => {\n        setIsHidden(false);\n\n        const timeoutId = setTimeout(() => setIsHidden(true), SHOW_ICON_FOR_X_MS);\n\n        return () => {\n            clearTimeout(timeoutId);\n        }\n    }, [value]);\n\n    const icon = isHidden\n        ? ''\n        : value > 0 \n            ? 'arrow_upward' \n            : value < 0 ? 'arrow_downward' : '';\n\n    return <Icon className=\"material-icons\">{icon}</Icon>;\n};\n\nexport default TrendIndicator;","import React, { FC } from 'react';\nimport { Container, CurrencyPair, Price, RelativeChange, Change } from './Ticker.styled';\nimport UpdateHighlight from 'core/components/update-highlight/UpdateHighlight';\nimport { formatCurrencyPair, formatPrice } from 'modules/reference-data/utils';\nimport TrendIndicator from 'core/components/trend-indicator';\n\nexport interface StateProps {\n    currencyPair: string;\n    lastPrice: number;\n    dailyChange: number;\n    dailyChangeRelative: number;\n    isActive?: boolean;\n}\n\nexport interface DispatchProps {\n    onClick?: () => void;\n}\n\nexport type Props = StateProps & DispatchProps;\n\nconst Ticker: FC<Props> = props => {\n    const { currencyPair, lastPrice, dailyChange, dailyChangeRelative, onClick, isActive } = props;\n    const isPositiveChange = dailyChange > 0;\n    const percentChange = dailyChangeRelative ? dailyChangeRelative * 100 : undefined;\n    return (\n        <Container onClick={onClick} isActive={!!isActive}>\n            <CurrencyPair>{formatCurrencyPair(currencyPair)}</CurrencyPair>\n            <Price><UpdateHighlight value={formatPrice(lastPrice)} /></Price>\n            <RelativeChange isPositive={isPositiveChange}>\n                <TrendIndicator value={dailyChangeRelative} />\n                <UpdateHighlight value={percentChange?.toFixed(2)} />\n                {percentChange && '%'}\n            </RelativeChange>\n            <Change isPositive={isPositiveChange}><UpdateHighlight value={dailyChange?.toFixed(2)} /></Change>\n        </Container>\n    );\n}\n\nexport default Ticker;","import Ticker from './Ticker.container';\n\nexport default Ticker;","import { connect } from 'react-redux';\nimport { RootState } from 'modules/root';\nimport { Dispatch } from 'redux';\nimport { SelectionActions } from 'modules/selection/actions';\nimport { getSelectedCurrencyPair } from 'modules/selection/selectors';\nimport { getTicker } from '../../selectors';\nimport Ticker, { StateProps, DispatchProps } from './Ticker';\n\nexport interface ContainerProps {\n    currencyPair: string;\n}\n\nconst mapStateToProps = (state: RootState, props: ContainerProps): StateProps => {\n    const { currencyPair } = props;\n    const selectedCurrencyPair = getSelectedCurrencyPair(state);\n    const ticker = getTicker(state)(currencyPair);\n    \n    return {\n        lastPrice: ticker?.lastPrice,\n        currencyPair,\n        dailyChangeRelative: ticker?.dailyChangeRelative,\n        dailyChange: ticker?.dailyChange,\n        isActive: selectedCurrencyPair === currencyPair\n    };\n}\n\nconst mapDispatchToProps = (dispatch: Dispatch, ownProps: ContainerProps): DispatchProps => {\n    const { currencyPair } = ownProps;\n\n    return {\n        onClick: () => dispatch(SelectionActions.selectCurrencyPair({currencyPair}))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Ticker);","import React, { FC, useState, useEffect } from 'react';\nimport { usePrevious } from 'core/hooks/usePrevious';\nimport { Container, TickerWrapper, ScrollDirection } from './Tickers.styled';\nimport Ticker from '../Ticker';\n\nexport interface Props {\n    currencyPairs: string[];\n    selectedCurrencyPairIndex?: number;\n}\n\nconst Tickers: FC<Props> = props => {\n    const { currencyPairs, selectedCurrencyPairIndex } = props;\n    const [direction, setDirection] = useState<ScrollDirection>('left');\n    const previousSelectedCurrencyPairIndex = usePrevious(selectedCurrencyPairIndex);\n\n    useEffect(() => {\n        const direction = (previousSelectedCurrencyPairIndex || 0) > (selectedCurrencyPairIndex || 0) ? 'right' : 'left';\n        setDirection(direction);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [selectedCurrencyPairIndex]);\n\n    return (\n        <Container className='tickers'>\n            {\n                currencyPairs.map((currencyPair, index) => (\n                    <TickerWrapper index={index} itemCount={currencyPairs.length} key={currencyPair} direction={direction}>\n                        <Ticker currencyPair={currencyPair} />\n                    </TickerWrapper>\n                ))\n            }\n        </Container>\n    )\n}\n\nexport default Tickers;","import Tickers from './Tickers.container';\n\nexport default Tickers;","import { connect } from 'react-redux';\nimport { RootState } from 'modules/root';\nimport { getVisibleCurrencyPairTickers } from 'modules/ticker/selectors';\nimport Tickers, { Props } from './Tickers';\n\nconst mapStateToProps = (state: RootState): Props => {\n    const { currencyPairs, selectedCurrencyPairIndex } = getVisibleCurrencyPairTickers(state);\n\n    return {\n        currencyPairs,\n        selectedCurrencyPairIndex\n    };\n}\n\nexport default connect(mapStateToProps)(Tickers);","import styled from 'styled-components';\n\nexport const Container = styled.div`\n    width: 100%;\n    height: 100%;\n    display: grid;\n`;","import * as Highcharts from 'highcharts/highstock';\nimport Palette from './style';\n\n(Highcharts as any).theme = {\n    colors: ['#2b908f', '#90ee7e', '#f45b5b', '#7798BF', '#aaeeee', '#ff0066',\n        '#eeaaee', '#55BF3B', '#DF5353', '#7798BF', '#aaeeee'],\n    chart: {\n        backgroundColor: {\n            stops: [\n                [0, '#2a2a2b'],\n                [1, '#3e3e40']\n            ]\n        },\n    },\n    xAxis: {\n        labels: {\n            style: {\n                color: '#E0E0E3'\n            }\n        },\n        lineColor: '#707073',\n        minorGridLineColor: '#505053',\n        tickColor: '#707073',\n        title: {\n            style: {\n                color: '#A0A0A3'\n            }\n        }\n    },\n    yAxis: {\n        gridLineColor: Palette.Border,\n        labels: {\n            style: {\n                color: '#E0E0E3'\n            }\n        },\n        lineColor: '#707073',\n        minorGridLineColor: '#505053',\n        tickColor: '#707073',\n        tickWidth: 1,\n        title: {\n            style: {\n                color: '#A0A0A3'\n            }\n        }\n    },\n    tooltip: {\n        borderColor: Palette.Border,\n        backgroundColor: 'rgba(0, 0, 0, 0.85)',\n        style: {\n            color: Palette.White\n        }\n    },\n    plotOptions: {\n        series: {\n            dataLabels: {\n                color: '#F0F0F3',\n                style: {\n                    fontSize: '13px'\n                }\n            },\n            marker: {\n                lineColor: '#333'\n            }\n        },\n        boxplot: {\n            fillColor: '#505053'\n        },\n        candlestick: {\n            lineColor: 'white'\n        },\n        errorbar: {\n            color: 'white'\n        }\n    },\n    legend: {\n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\n        itemStyle: {\n            color: '#E0E0E3'\n        },\n        itemHoverStyle: {\n            color: '#FFF'\n        },\n        itemHiddenStyle: {\n            color: '#606063'\n        },\n        title: {\n            style: {\n                color: '#C0C0C0'\n            }\n        }\n    },\n    credits: {\n        style: {\n            color: '#666'\n        }\n    },\n    labels: {\n        style: {\n            color: '#707073'\n        }\n    },\n    drilldown: {\n        activeAxisLabelStyle: {\n            color: '#F0F0F3'\n        },\n        activeDataLabelStyle: {\n            color: '#F0F0F3'\n        }\n    },\n    navigation: {\n        buttonOptions: {\n            symbolStroke: '#DDDDDD',\n            theme: {\n                fill: '#505053'\n            }\n        }\n    },\n    // scroll charts\n    rangeSelector: {\n        buttonTheme: {\n            fill: '#505053',\n            stroke: '#000000',\n            style: {\n                color: '#CCC'\n            },\n            states: {\n                hover: {\n                    fill: '#707073',\n                    stroke: '#000000',\n                    style: {\n                        color: 'white'\n                    }\n                },\n                select: {\n                    fill: '#000003',\n                    stroke: '#000000',\n                    style: {\n                        color: 'white'\n                    }\n                }\n            }\n        },\n        inputBoxBorderColor: '#505053',\n        inputStyle: {\n            backgroundColor: '#333',\n            color: 'silver'\n        },\n        labelStyle: {\n            color: 'silver'\n        }\n    },\n    navigator: {\n        handles: {\n            backgroundColor: '#666',\n            borderColor: '#AAA'\n        },\n        outlineColor: '#CCC',\n        maskFill: 'rgba(255,255,255,0.1)',\n        series: {\n            color: '#7798BF',\n            lineColor: '#A6C7ED'\n        },\n        xAxis: {\n            gridLineColor: '#505053'\n        }\n    },\n    scrollbar: {\n        barBackgroundColor: '#808083',\n        barBorderColor: '#808083',\n        buttonArrowColor: '#CCC',\n        buttonBackgroundColor: '#606063',\n        buttonBorderColor: '#606063',\n        rifleColor: '#FFF',\n        trackBackgroundColor: '#404043',\n        trackBorderColor: '#404043'\n    }\n};\n\nHighcharts.setOptions((Highcharts as any).theme);","import React, { FC, useEffect, useState } from 'react';\nimport * as Highcharts from 'highcharts/highstock';\nimport HighchartsReact from 'highcharts-react-official';\nimport { Container } from './CandlesChart.styled';\nimport { Candle } from '../../types/Candle';\nimport { formatCurrencyPair } from 'modules/reference-data/utils';\nimport 'theme/Highstock';\nimport Palette from 'theme/style';\n\nexport interface Props {\n    candles: Candle[];\n    currencyPair?: string;\n}\n\nconst CandlesChart: FC<Props> = props => {\n    const { candles, currencyPair } = props;\n    const [chartOptions, setChartOptions] = useState<Highcharts.Options>({\n        time: {\n            useUTC: false\n        },\n        yAxis: [{\n            labels: {\n                align: 'right',\n                x: -3\n            },\n            title: {\n                text: 'OHLC'\n            },\n            height: '70%',\n            lineWidth: 2,\n            resize: {\n                enabled: true\n            }\n        }, {\n            labels: {\n                align: 'right',\n                x: -3\n            },\n            title: {\n                text: 'Volume'\n            },\n            top: '75%',\n            height: '25%',\n            offset: 0,\n            lineWidth: 2\n        }],\n        series: [{\n            type: 'candlestick',\n            data: []\n        }, {\n            type: 'column',\n            name: 'Volume',\n            data: [],\n            yAxis: 1\n        }],\n        rangeSelector: {\n            selected: 2,\n            buttons: [{\n                type: 'minute',\n                count: 5,\n                text: '5m'\n            }, {\n                type: 'minute',\n                count: 15,\n                text: '15m'\n            }, {\n                type: 'minute',\n                count: 30,\n                text: '30m'\n            }, {\n                type: 'hour',\n                count: 1,\n                text: '1h'\n            }, {\n                type: 'hour',\n                count: 12,\n                text: '12h'\n            }, {\n                type: 'all',\n                text: 'All'\n            }]\n        },\n    })\n\n    useEffect(() => {\n        if (candles && candles.length > 0) {\n            const ohlc = candles.map(({ timestamp, ...rest }) => ({\n                x: timestamp,\n                ...rest\n            }))\n                .sort((a, b) => a.x - b.x);\n            const volumes = candles.map(({timestamp, volume}) => [timestamp, volume]).sort((a, b) => a[0] - b[0]);\n\n            setChartOptions({\n                series: [{\n                    type: 'candlestick',\n                    name: currencyPair && formatCurrencyPair(currencyPair),\n                    data: ohlc\n                }, {\n                    type: 'column',\n                    data: volumes,\n                }],\n                plotOptions: {\n                    candlestick: {\n                        color: Palette.Negative,\n                        upColor: Palette.Positive\n                    },\n                    column: {\n                        color: Palette.LightGray\n                    }\n                }\n            });\n        }\n\n    }, [candles, currencyPair]);\n\n    return (\n        <Container className=\"candles-chart\">\n            <HighchartsReact\n                highcharts={Highcharts}\n                options={chartOptions}\n                constructorType={'stockChart'}\n            />\n        </Container>\n    )\n}\n\nexport default CandlesChart;","import CandlesChart from './CandlesChart.container';\n\nexport default CandlesChart;","import { connect } from 'react-redux';\nimport CandlesChart, { Props } from './CandlesChart';\nimport { RootState } from 'modules/root';\nimport { getCandles } from '../../selectors';\nimport { getSelectedCurrencyPair } from 'modules/selection/selectors';\n\nconst mapStateToProps = (state: RootState): Props => {\n    const selectedCurrencyPair = getSelectedCurrencyPair(state);\n    const candles = selectedCurrencyPair ? getCandles(state)(selectedCurrencyPair, '1m') : [];\n    \n    return {\n        candles,\n        currencyPair: selectedCurrencyPair\n    };\n}\n\n\nexport default connect(mapStateToProps)(CandlesChart);","import { ICellRendererParams } from 'ag-grid-community';\nimport Palette from 'theme/style';\n\nconst amountRenderer = (value: string, styles: { [key: string]: any }) => {\n    const formattedStyles = Object.keys(styles)\n        .map(key => [key, styles[key]].join(':'))\n        .join(';');\n\n    return `\n        <div style=\"position: relative;\">\n            <div style=\"height: 30px; position: absolute; z-index: 0; ${formattedStyles}\"></div>\n            <div style=\"position: absolute; z-index: 1;\">${value}</div>\n        </div>`;\n};\n\nexport const bidAmountRenderer = (params: ICellRendererParams) => {\n    const { bidDepth: depth, maxDepth } = params.data;\n    const width = ((depth || 0) / maxDepth) * 100;\n    return amountRenderer(params.valueFormatted, { 'background-color': Palette.BidTransparent, width: `${width}%`, left: '-12px' });\n};\n\nexport const askAmountRenderer = (params: ICellRendererParams) => {\n    const { askDepth: depth, maxDepth } = params.data;\n    const width = ((depth || 0) / maxDepth) * 100;\n    return amountRenderer(params.valueFormatted, { 'background-color': Palette.AskTransparent, width: `${width}%`, right: '-12px' });\n};","import styled from 'styled-components';\n\nexport const Container = styled.div`\n    width: 100%;\n    height: 100%;\n    font-family: FiraSans-Light;\n`;\n","import React, { FC } from 'react';\nimport { AgGridReact } from 'ag-grid-react';\nimport { ColDef } from 'ag-grid-community';\nimport { priceFormatter, amountFormatter } from 'modules/ag-grid/formatter';\nimport { useThrottle } from 'core/hooks/useThrottle';\nimport { bidAmountRenderer, askAmountRenderer } from './renderers';\nimport { Order } from '../../types/Order';\nimport { Container } from './Book.styled';\nimport Palette from 'theme/style';\n\nexport interface Props {\n    orders: { bid: Order, ask: Order }[];\n}\n\nconst Book: FC<Props> = props => {\n    const { orders } = props;\n    const throttledOrders = useThrottle<{ bid: Order, ask: Order }[]>(orders, 500);\n\n    const columnDefs: ColDef[] = [{\n        headerName: 'Bid Amount',\n        field: 'bid.amount',\n        valueFormatter: amountFormatter,\n        cellRenderer: bidAmountRenderer\n    }, {\n        headerName: 'Bid Price',\n        field: 'bid.price',\n        cellStyle: () => ({\n            color: Palette.Bid\n        }),\n        type: 'numericColumn',\n        valueFormatter: priceFormatter\n    }, {\n        headerName: 'Ask Price',\n        field: 'ask.price',\n        cellStyle: () => ({\n            color: Palette.Ask\n        }),\n        valueFormatter: priceFormatter\n    }, {\n        headerName: 'Ask Amount',\n        field: 'ask.amount',\n        valueFormatter: params => amountFormatter({ value: Math.abs(params.value) }),\n        cellRenderer: askAmountRenderer\n    }];\n\n    return (\n        <Container className='ag-theme-balham-dark'>\n            <AgGridReact\n                columnDefs={columnDefs}\n                rowData={throttledOrders}\n                deltaRowDataMode={true}\n                getRowNodeId={data => [data.bid?.id, data.ask?.id].join('#')}\n                onGridReady={event => event.api.sizeColumnsToFit()}\n            >\n            </AgGridReact>\n        </Container>\n    );\n}\n\nexport default Book;","import { createSelector } from 'reselect';\nimport { memoize, range, uniq } from 'lodash';\nimport { RootState } from 'modules/root';\nimport { Order } from './types/Order';\n\nconst bookSelector = (state: RootState) => state.book;\n\nexport const getRawBook = createSelector(\n    bookSelector,\n    book => memoize(\n        (symbol: string) => book[symbol]\n    )\n)\n\nexport const getBook = createSelector(\n    bookSelector,\n    book => memoize((symbol: string) => {\n        const rawBook = book[symbol] || [];\n\n        const bids = rawBook\n            .filter(order => order.amount > 0)\n            .sort((a, b) => b.price - a.price);\n        const asks = rawBook\n            .filter(order => order.amount < 0)\n            .sort((a, b) => a.price - b.price);\n\n        const levels = Math.max(bids.length, asks.length);\n        const maxBidDepth = bids.map(bid => bid.amount).reduce((acc, v) => acc += v, 0);\n        const maxAskDepth = asks.map(ask => Math.abs(ask.amount)).reduce((acc, v) => acc += v, 0);\n        const maxDepth = maxBidDepth + maxAskDepth;\n\n        const result: {bid: Order, ask: Order, bidDepth: number, askDepth: number, maxDepth: number}[] = [];\n        range(levels)\n            .forEach(level => {\n                const bid = bids[level];\n                const ask = asks[level];\n\n                result.push({\n                    bid,\n                    ask,\n                    bidDepth: bid && (result[level - 1] ? result[level - 1].bidDepth : 0) + bid.amount,\n                    askDepth: ask && (result[level - 1] ? result[level - 1].askDepth : 0) + Math.abs(ask.amount),\n                    maxDepth\n                });\n            });\n        return result;\n    })\n)\n\nconst getPricePoints = (orders: Order[]) => uniq(orders.map(order => order.price)).sort((a, b) => a - b);\n\nconst computeDepth = (orders: Order[]) => {\n    return (pricePoints: number[], orderFilter: (order: Order, pricePoint: number) => boolean) => {\n        return pricePoints.map(price => {\n            const depth = orders.filter(order => orderFilter(order, price)).reduce((acc, order) => {\n                return acc += Math.abs(order.amount);\n            }, 0);\n            return {\n                price,\n                depth\n            };\n        });\n    }\n}\n\nexport const getDepth = createSelector(\n    bookSelector,\n    book => memoize((symbol: string) => {\n        const rawBook = book[symbol] || [];\n\n        const bids = rawBook\n            .filter(order => order.amount > 0);\n\n        const asks = rawBook\n            .filter(order => order.amount < 0);\n\n        const bidPrices = getPricePoints(bids);\n        const askPrices = getPricePoints(asks);\n\n        const bidDepth = computeDepth(bids)(bidPrices, (order, pricePoint) => order.price >= pricePoint);\n        const askDepth = computeDepth(asks)(askPrices, (order, pricePoint) => order.price <= pricePoint);\n\n        return {\n            bids: bidDepth,\n            asks: askDepth\n        };\n    })\n)","import Book from './Book.container';\n\nexport default Book;","import { connect } from 'react-redux';\nimport { RootState } from 'modules/root';\nimport { getSelectedCurrencyPair } from 'modules/selection/selectors';\nimport Book, { Props } from './Book'\nimport { getBook } from '../../selectors';\n\nconst mapStateToProps = (state: RootState): Props => {\n    const selectedCurrencyPair = getSelectedCurrencyPair(state);\n    const orders = selectedCurrencyPair ? getBook(state)(selectedCurrencyPair) : [];\n\n    return {\n        orders\n    };\n}\n\nexport default connect(mapStateToProps)(Book);","import styled from 'styled-components';\n\nexport const Container = styled.div`\n    width: 100%;\n    height: 100%;\n    display: grid;\n`;\n","import * as Highcharts from 'highcharts';\nimport Palette from './style';\n\n(Highcharts as any).theme = {\n    colors: ['#2b908f', '#90ee7e', '#f45b5b', '#7798BF', '#aaeeee', '#ff0066',\n        '#eeaaee', '#55BF3B', '#DF5353', '#7798BF', '#aaeeee'],\n    chart: {\n        backgroundColor: {\n            stops: [\n                [0, '#2a2a2b'],\n                [1, '#3e3e40']\n            ]\n        },\n    },\n    xAxis: {\n        labels: {\n            style: {\n                color: '#E0E0E3'\n            }\n        },\n        lineColor: '#707073',\n        minorGridLineColor: '#505053',\n        tickColor: '#707073',\n        title: {\n            style: {\n                color: '#A0A0A3'\n            }\n        }\n    },\n    yAxis: {\n        gridLineColor: Palette.Border,\n        labels: {\n            style: {\n                color: '#E0E0E3'\n            }\n        },\n        lineColor: '#707073',\n        minorGridLineColor: '#505053',\n        tickColor: '#707073',\n        tickWidth: 1,\n        title: {\n            style: {\n                color: '#A0A0A3'\n            }\n        }\n    },\n    tooltip: {\n        borderColor: Palette.Border,\n        backgroundColor: 'rgba(0, 0, 0, 0.85)',\n        style: {\n            color: Palette.White\n        }\n    },\n    plotOptions: {\n        series: {\n            dataLabels: {\n                color: '#F0F0F3',\n                style: {\n                    fontSize: '13px'\n                }\n            },\n            marker: {\n                lineColor: '#333'\n            }\n        },\n        boxplot: {\n            fillColor: '#505053'\n        },\n        candlestick: {\n            lineColor: 'white'\n        },\n        errorbar: {\n            color: 'white'\n        }\n    },\n    legend: {\n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\n        itemStyle: {\n            color: '#E0E0E3'\n        },\n        itemHoverStyle: {\n            color: '#FFF'\n        },\n        itemHiddenStyle: {\n            color: '#606063'\n        },\n        title: {\n            style: {\n                color: '#C0C0C0'\n            }\n        }\n    },\n    credits: {\n        style: {\n            color: '#666'\n        }\n    },\n    labels: {\n        style: {\n            color: '#707073'\n        }\n    },\n    drilldown: {\n        activeAxisLabelStyle: {\n            color: '#F0F0F3'\n        },\n        activeDataLabelStyle: {\n            color: '#F0F0F3'\n        }\n    },\n    navigation: {\n        buttonOptions: {\n            symbolStroke: '#DDDDDD',\n            theme: {\n                fill: '#505053'\n            }\n        }\n    },\n    // scroll charts\n    rangeSelector: {\n        buttonTheme: {\n            fill: '#505053',\n            stroke: '#000000',\n            style: {\n                color: '#CCC'\n            },\n            states: {\n                hover: {\n                    fill: '#707073',\n                    stroke: '#000000',\n                    style: {\n                        color: 'white'\n                    }\n                },\n                select: {\n                    fill: '#000003',\n                    stroke: '#000000',\n                    style: {\n                        color: 'white'\n                    }\n                }\n            }\n        },\n        inputBoxBorderColor: '#505053',\n        inputStyle: {\n            backgroundColor: '#333',\n            color: 'silver'\n        },\n        labelStyle: {\n            color: 'silver'\n        }\n    },\n    navigator: {\n        handles: {\n            backgroundColor: '#666',\n            borderColor: '#AAA'\n        },\n        outlineColor: '#CCC',\n        maskFill: 'rgba(255,255,255,0.1)',\n        series: {\n            color: '#7798BF',\n            lineColor: '#A6C7ED'\n        },\n        xAxis: {\n            gridLineColor: '#505053'\n        }\n    },\n    scrollbar: {\n        barBackgroundColor: '#808083',\n        barBorderColor: '#808083',\n        buttonArrowColor: '#CCC',\n        buttonBackgroundColor: '#606063',\n        buttonBorderColor: '#606063',\n        rifleColor: '#FFF',\n        trackBackgroundColor: '#404043',\n        trackBorderColor: '#404043'\n    }\n};\n\nHighcharts.setOptions((Highcharts as any).theme);","import React, { FC, useState, useEffect } from 'react';\nimport * as Highcharts from 'highcharts';\nimport HighchartsReact from 'highcharts-react-official';\nimport { useThrottle } from 'core/hooks/useThrottle';\nimport { Container } from './DepthChart.styled';\nimport Palette from 'theme/style';\nimport 'theme/Highchart';\n\ninterface Depth {\n    bids: {price: number, depth: number}[];\n    asks: {price: number, depth: number}[];\n};\n\nexport interface Props {\n    depth: Depth;\n}\n\nconst DepthChart: FC<Props> = props => {\n    const { depth } = props;\n    const throttledDepth = useThrottle<Depth>(depth, 500);\n    const [chartOptions, setChartOptions] = useState<Highcharts.Options>({\n        chart: {\n            type: 'area',\n            animation: false\n        },\n        title: {\n            text: ''\n        },\n        legend: {\n            enabled: false\n        },\n        series: [{\n            name: 'bids',\n            type: 'area',\n            data: []\n        }, {\n            name: 'asks',\n            type: 'area',\n            data: []\n        }],\n        xAxis: {\n            labels: {\n                autoRotation: false\n            }\n        },\n        yAxis: {\n            title: {\n                text: ''\n            },\n            labels: {\n                enabled: false\n            }\n        },\n        plotOptions: {\n            area: {\n                marker: {\n                    enabled: false,\n                    states: {\n                        hover: {\n                            enabled: false\n                        }\n                    }\n                }\n            }\n        },\n    })\n\n    useEffect(() => {\n        const { bids, asks } = throttledDepth;\n\n        setChartOptions({\n            xAxis: {\n                categories: [...bids, ...asks].map(order => order.price.toString()),\n                labels: {\n                    step: 5,\n                    formatter: function() {\n                        return Number.parseFloat(this.value.toString()).toFixed(0);\n                    }\n                }\n            },\n            series: [{\n                name: 'bids',\n                type: 'area',\n                data: [\n                    ...bids.map(bid => bid.depth),\n                    ...asks.map(() => null)\n                ],\n                color: Palette.Bid\n            }, {\n                name: 'asks',\n                type: 'area',\n                data: [\n                    ...bids.map(() => null),\n                    ...asks.map(ask => ask.depth)\n                ],\n                color: Palette.Ask\n            }]\n        });\n\n    }, [throttledDepth]);\n\n    return (\n        <Container>\n            <HighchartsReact\n                highcharts={Highcharts}\n                options={chartOptions}\n                constructorType={'chart'}\n            />\n        </Container>\n    )\n}\n\nexport default DepthChart;","import DepthChart from './DepthChart.container';\n\nexport default DepthChart;","import { connect } from 'react-redux';\nimport { RootState } from 'modules/root';\nimport { getSelectedCurrencyPair } from 'modules/selection/selectors';\nimport DepthChart, { Props } from './DepthChart'\nimport { getDepth } from '../../selectors';\n\nconst mapStateToProps = (state: RootState): Props => {\n    const selectedCurrencyPair = getSelectedCurrencyPair(state);\n    const depth = selectedCurrencyPair ? getDepth(state)(selectedCurrencyPair) : { bids: [], asks: [] };\n\n    return {\n        depth\n    };\n}\n\nexport default connect(mapStateToProps)(DepthChart);","import styled from 'styled-components';\n\nexport const Container = styled.div`\n    width: 100%;\n    height: 100%;\n\n    .selected-row {\n        font-family: FiraSans-Medium;\n    }\n`;\n\n","import styled from 'styled-components';\n\nexport const SvgContainer = styled.svg`\n    fill: none;\n`;","import LineChart from './LineChart';\n\nexport default LineChart;","import React, { FC } from 'react';\nimport { SvgContainer } from './LineChart.styled';\nimport Palette from 'theme/style';\n\ninterface Props {\n    values: number[];\n    width?: number;\n    height?: number;\n}\n\nconst LineChart: FC<Props> = props => {\n    const { values, width = 50, height = 25 } = props;\n    const maxX = values.length - 1;\n    const minValue = Math.min(...values);\n    const maxValue = Math.max(...values);\n    const diff = maxValue - minValue;\n   \n    const getSvgX = (x: number) => (x / maxX) * width;\n\n    const getSvgY = (y: number) => height - ((y - minValue) * height / diff);\n\n    if (values.length === 0) {\n        return <div></div>\n    }\n\n    let pathD = `M ${getSvgX(0)} ${getSvgY(values[0])} `;\n    pathD += values.map((value, i) => {\n        const x = getSvgX(i);\n        const y = getSvgY(value);\n\n        return `L  ${x}  ${y} `;\n    });\n\n    return (\n        <SvgContainer viewBox={`0 0 ${width} ${height}`}>\n            <path d={pathD} style={{ stroke: Palette.LightGray }} />\n        </SvgContainer>\n    );\n};\n\nexport default LineChart;","import styled from 'styled-components';\n\nexport const Container = styled.div`\n    padding: 0 5px;\n`;","import React, { FC } from 'react';\nimport LineChart from 'core/components/LineChart';\nimport { Container } from './PriceChart.styled';\n\ninterface Props {\n    value: number[];\n}\n\nconst PriceChart: FC<Props> = props => {\n    const { value: prices } = props;\n\n    return <Container><LineChart values={prices} /></Container>;\n};\n\nexport default PriceChart;","import React, { FC, useEffect, useState } from 'react';\nimport { AgGridReact } from 'ag-grid-react';\nimport { ColDef, GridApi } from 'ag-grid-community';\nimport { priceFormatter, volumeFormatter } from 'modules/ag-grid/formatter';\nimport { Ticker } from 'modules/ticker/types/Ticker';\nimport { formatCurrencyPair } from 'modules/reference-data/utils';\nimport { Container } from './Market.styled';\nimport PriceChartRenderer from './PriceChart';\nimport Palette from 'theme/style';\n\nexport interface StateProps {\n    tickers: (Ticker & { currencyPair: string, prices: number[] })[];\n    selectedCurrencyPair?: string;\n}\n\nexport interface DispatchProps {\n    onClick: (currencyPair: string) => void;\n}\n\nexport type Props = StateProps & DispatchProps;\n\nconst Market: FC<Props> = props => {\n    const { tickers, selectedCurrencyPair, onClick } = props;\n    const [gridApi, setGridApi] = useState<GridApi | undefined>();\n\n    const columnDefs: ColDef[] = [{\n        headerName: 'Ccy',\n        field: 'currencyPair',\n        valueFormatter: params => formatCurrencyPair(params.value)\n    }, {\n        headerName: 'Bid Price',\n        field: 'bid',\n        cellStyle: () => ({\n            color: Palette.Bid\n        }),\n        type: 'numericColumn',\n        valueFormatter: priceFormatter\n    }, {\n        headerName: 'Ask Price',\n        field: 'ask',\n        cellStyle: () => ({\n            color: Palette.Ask\n        }),\n        valueFormatter: priceFormatter\n    }, {\n        headerName: 'Volume',\n        field: 'volume',\n        valueFormatter: volumeFormatter\n    }, {\n        headerName: '',\n        field: 'prices',\n        cellRenderer: 'priceChartRenderer',\n        width: 100,\n        cellStyle: () => ({\n            'padding-left': 0,\n            'padding-right': 0\n        })\n    }];\n\n    const rowClassRules = {\n        'selected-row': (params: any) => params.node.isSelected()\n    };\n\n    useEffect(() => {\n        if (gridApi) {\n            gridApi.forEachNode(function(node) {\n                node.setSelected(node.data.currencyPair === selectedCurrencyPair);\n              });\n            gridApi.redrawRows();\n        }\n    }, [gridApi, selectedCurrencyPair]);\n\n    return (\n        <Container className='ag-theme-balham-dark'>\n            <AgGridReact\n                columnDefs={columnDefs}\n                rowData={tickers}\n                rowClassRules={rowClassRules}\n                deltaRowDataMode={true}\n                getRowNodeId={data => data.currencyPair}\n                onGridReady={event => {\n                    setGridApi(event.api);\n                    event.api.sizeColumnsToFit();\n                }}\n                rowSelection={'single'}\n                onRowClicked={event => {\n                    onClick(event.data.currencyPair);\n                }}\n                frameworkComponents={{\n                    priceChartRenderer: PriceChartRenderer\n                }}\n            >\n            </AgGridReact>\n        </Container>\n    );\n}\n\nexport default Market;","import Market from './Market.container';\n\nexport default Market;","import { connect } from 'react-redux';\nimport { Dispatch } from 'redux';\nimport { getSelectedCurrencyPair } from 'modules/selection/selectors';\nimport { getTickersWithPrices } from 'modules/ticker/selectors';\nimport { RootState } from 'modules/root';\nimport { SelectionActions } from 'modules/selection/actions';\nimport Market, { StateProps, DispatchProps } from './Market';\n\nconst mapStateToProps = (state: RootState): StateProps => {\n    const tickers = getTickersWithPrices(state);\n    const selectedCurrencyPair = getSelectedCurrencyPair(state);\n\n    return {\n        tickers,\n        selectedCurrencyPair\n    };\n}\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n\n    return {\n        onClick: (currencyPair: string) => dispatch(SelectionActions.selectCurrencyPair({ currencyPair }))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Market);","import styled from 'styled-components';\nimport Palette from 'theme/style';\n\nexport const Container = styled.div`\n    height: 100%;\n    display: grid;\n    grid-template-rows: 20px 1fr;\n    grid-template-columns: 1fr;\n    grid-template-areas:\n        \"header\"\n        \"body\";\n`;\n\nexport const Header = styled.div`\n    grid-area: header;\n    color: ${Palette.Label};\n    font-size: 12px;\n`;\n\nexport const Body = styled.div`\n    grid-area: body;\n`;","import Widget from './Widget';\n\nexport default Widget;","import React, { FC } from 'react';\nimport { Container, Header, Body } from './Widget.styled';\n\nexport interface Props {\n    children: JSX.Element;\n    title: string;\n}\n\nconst Widget: FC<Props> = props => {\n    const { children, title } = props;\n\n    return (\n        <Container>\n            <Header>{title}</Header>\n            <Body>{children}</Body>\n        </Container>\n    )\n}\n\nexport default Widget;","import styled from 'styled-components';\nimport Palette from 'theme/style';\n\nexport const Container = styled.div`\n    font-size: 10px;\n    color: ${Palette.White};\n    padding: 0 10px;\n    display: flex;\n    justify-content: flex-end;\n`;","import Diagnostics from './Diagnostics';\n\nexport default Diagnostics;","import React, { FC, useState, useEffect } from 'react';\nimport { Container } from './Diagnostics.styled';\n\nconst DIAGNOSTICS_INTERVAL_MS = 2000;\n\nconst Diagnostics: FC<{}> = () => {\n    const [delay, setDelay] = useState<number | undefined>();\n    useEffect(() => {\n        let timeoutId: number | undefined = undefined;\n        const intervalId = setInterval(() => {\n            const time = Date.now();\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n            }\n            timeoutId = setTimeout(() => {\n                setDelay(Date.now() - time);\n            });\n        }, DIAGNOSTICS_INTERVAL_MS);\n\n        return () => {\n            clearInterval(intervalId);\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n            }\n        };\n    }, []);\n\n    return <Container>Latency: {delay}ms</Container>;\n};\n\nexport default Diagnostics;","import styled from 'styled-components';\nimport Palette from 'theme/style';\n\nexport const Container = styled.div`\n    background-color: ${Palette.BackgroundColor};\n    width: 100vw;\n    height: 100vh;\n    overflow: hidden;\n`;\n\nexport const Content = styled.div`\n    display: grid;\n    grid-gap: 5px;\n    padding: 5px 10px;\n    width: 100%;\n    height: 100%;\n    @media only screen and (min-width: 1200px) {\n        grid-template-rows: 40px 70px 1fr 250px 30px;\n        grid-template-columns: 450px 1fr 1fr;\n        grid-template-areas: \n            \"header header header\"\n            \"tickers tickers tickers\"\n            \"market candles candles\"\n            \"trades book depth\"\n            \"footer footer footer\";\n    }\n\n    @media only screen and (min-width: 600px) and (max-width: 1200px) {\n        grid-template-rows: 40px 70px 1fr 1fr 30px;\n        grid-template-columns: 1fr 1fr;\n        grid-template-areas: \n            \"header header\"\n            \"market book\"\n            \"market book\"\n            \"trades depth\"\n            \"footer footer\";\n\n        .tickers {\n            display: none;\n        }\n        \n        .candles-chart {\n            display: none;\n        }\n    }\n\n    @media only screen and (max-width: 600px) {\n        grid-template-rows: 40px calc(100% - 90px) 30px;\n        grid-template-columns: calc(100% - 20px);\n        grid-template-areas: \n            \"header\"\n            \"market\"\n            \"footer\";\n\n        .candles-chart {\n            display: none;\n        }\n    }\n`;\n\nexport const Header = styled.div`\n    grid-area: header;\n    color: ${Palette.White};\n    font-family: FiraSans-MediumItalic;\n    background-color: #2d3436;\n    padding: 0 0 0 10px;\n    font-size: 28px;\n`;\n\nexport const TickersPanel = styled.div`\n    grid-area: tickers;\n    overflow: auto;\n    width: 1200px;\n    margin: 0 auto;\n`;\n\nexport const MarketPanel = styled.div`\n    grid-area: market;\n`;\n\nexport const TradesPanel = styled.div`\n    grid-area: trades;\n`;\n\nexport const CandlesPanel = styled.div`\n    grid-area: candles;\n`;\n\nexport const BookPanel = styled.div`\n    grid-area: book;\n`;\n\nexport const DepthPanel = styled.div`\n    grid-area: depth;\n`;\n\nexport const Footer = styled.div`\n    grid-area: footer;\n    padding: 0 10px;\n`;\n\n","import React, { useEffect } from 'react';\nimport { Provider } from 'react-redux';\nimport configureStore from './modules/redux/store';\nimport { AppActions } from './modules/app/actions';\nimport Trades from 'modules/trades/components/Trades';\nimport Tickers from 'modules/ticker/components/Tickers';\nimport CandlesChart from 'modules/candles/components/CandlesChart';\nimport Book from 'modules/book/components/Book';\nimport DepthChart from 'modules/book/components/DepthChart';\nimport Market from 'modules/ticker/components/Market';\nimport Widget from 'core/components/widget';\nimport Diagnostics from 'core/components/Diagnostics';\nimport { Container, Content, Header, MarketPanel, TradesPanel, TickersPanel, CandlesPanel, BookPanel, DepthPanel, Footer } from 'App.styled';\nimport 'ag-grid-community/dist/styles/ag-grid.css';\nimport 'ag-grid-community/dist/styles/ag-theme-balham-dark.css';\nimport 'theme/fonts.css';\n\n\nfunction App() {\n  const store = configureStore();\n\n  useEffect(() => {\n    store.dispatch(AppActions.bootstrapApp());\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <Provider store={store}>\n      <Container>\n        <Content>\n          <Header>Crypto Trader</Header>\n          <TickersPanel><Tickers /></TickersPanel>\n          <MarketPanel><Widget title={'Market'}><Market /></Widget></MarketPanel>\n          <TradesPanel><Widget title={'Trades'}><Trades /></Widget></TradesPanel>\n          <CandlesPanel><CandlesChart /></CandlesPanel>\n          <BookPanel><Widget title={'Book'}><Book /></Widget></BookPanel>\n          <DepthPanel><Widget title={'Depth'}><DepthChart /></Widget></DepthPanel>\n          <Footer><Diagnostics /></Footer>\n        </Content>\n      </Container>\n    </Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}