(this["webpackJsonpcrypto-trader"]=this["webpackJsonpcrypto-trader"]||[]).push([[0],{119:function(e,n,t){},120:function(e,n,t){"use strict";t.r(n);var r,a,o=t(0),c=t.n(o),i=t(41),u=t.n(i),l=(t(91),t(11)),s=t(26),d=t(137);function f(e){return function(n,t){return"undefined"===typeof n?{type:e}:"undefined"===typeof t?{type:e,payload:n}:{type:e,payload:n,meta:t}}}function b(e,n){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,r=arguments.length>1?arguments[1]:void 0;return e.hasOwnProperty(r.type)?e[r.type](t,r):t}}!function(e){e[e.Unknown=0]="Unknown",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected"}(r||(r={})),function(e){e.SEND_MESSAGE="TRANSPORT/SEND_MESSAGE",e.RECEIVE_MESSAGE="TRANSPORT/RECEIVE_MESSAGE",e.CHANGE_CONNECTION_STATUS="TRANSPORT/CHANGE_CONNECTION_STATUS",e.SUBSCRIBE_TO_CHANNEL="TRANSPORT/SUBSCRIBE_TO_CHANNEL",e.SUBSCRIBE_TO_CHANNEL_ACK="TRANSPORT/SUBSCRIBE_TO_CHANNEL_ACK",e.SUBSCRIBE_TO_CHANNEL_NACK="TRANSPORT/SUBSCRIBE_TO_CHANNEL_NACK",e.UNSUBSCRIBE_FROM_CHANNEL="TRANSPORT/UNSUBSCRIBE_FROM_CHANNEL",e.UNSUBSCRIBE_FROM_CHANNEL_ACK="TRANSPORT/UNSUBSCRIBE_FROM_CHANNEL_ACK",e.UNSUBSCRIBE_FROM_CHANNEL_NACK="TRANSPORT/UNSUBSCRIBE_FROM_CHANNEL_NACK",e.STALE_SUBSCRIPTION="TRANSPORT/STALE_SUBSCRIPTION"}(a||(a={}));var m,O={sendMessage:f(a.SEND_MESSAGE),receiveMessage:f(a.RECEIVE_MESSAGE),changeConnectionStatus:f(a.CHANGE_CONNECTION_STATUS),subscribeToChannel:f(a.SUBSCRIBE_TO_CHANNEL),subscribeToChannelAck:f(a.SUBSCRIBE_TO_CHANNEL_ACK),subscribeToChannelNack:f(a.SUBSCRIBE_TO_CHANNEL_NACK),unsubscribeFromChannel:f(a.UNSUBSCRIBE_FROM_CHANNEL),unsubscribeFromChannelAck:f(a.UNSUBSCRIBE_FROM_CHANNEL_ACK),unsubscribeFromChannelNack:f(a.UNSUBSCRIBE_FROM_CHANNEL_NACK),staleSubscription:f(a.STALE_SUBSCRIPTION)},p=function(e){var n=e.connection;return function(e){return function(t){return n.onReceive((function(n){var r=JSON.parse(n),a=void 0,o=void 0;Array.isArray(r)?o=r[0]:r.hasOwnProperty("chanId")&&(o=r.chanId),o&&e.getState().subscriptions[o]&&(a=e.getState().subscriptions[o]),t(O.receiveMessage(r,a))})),function(e){return t(e)}}}},v=t(32),E=t(33),C=function(){function e(n){Object(v.a)(this,e),this.realm=n,this.socket=void 0,this.onConnectFn=void 0,this.onReceivedFn=void 0,this.onErrorFn=void 0,this.onCloseFn=void 0,this.socket=void 0,this.onReceivedFn=void 0}return Object(E.a)(e,[{key:"start",value:function(){var e=this;this.socket=new WebSocket(this.realm),this.socket.onopen=function(){return e.onConnectFn&&e.onConnectFn()},this.socket.onmessage=function(n){var t=n.data;e.onReceivedFn&&e.onReceivedFn(t)},this.socket.onerror=function(n){return e.onErrorFn&&e.onErrorFn(n)},this.socket.onclose=function(){return e.onCloseFn&&e.onCloseFn()}}},{key:"stop",value:function(){throw new Error("Method not implemented.")}},{key:"send",value:function(e){this.socket&&(this.socket.readyState!==this.socket.OPEN?console.warn("Fail to send message as WS is in ".concat(this.socket.readyState," state")):this.socket.send(e))}},{key:"onConnect",value:function(e){this.onConnectFn=e}},{key:"onReceived",value:function(e){this.onReceivedFn=e}},{key:"onError",value:function(e){this.onErrorFn=e}},{key:"onClose",value:function(e){this.onCloseFn=e}}]),e}(),h=function(){function e(n){Object(v.a)(this,e),this.connectionProxy=n}return Object(E.a)(e,[{key:"connect",value:function(){this.connectionProxy.start()}},{key:"disconnect",value:function(){this.connectionProxy.stop()}},{key:"send",value:function(e){this.connectionProxy.send(e)}},{key:"onConnect",value:function(e){this.connectionProxy.onConnect(e)}},{key:"onReceive",value:function(e){this.connectionProxy.onReceived(e)}},{key:"onError",value:function(e){this.connectionProxy.onError(e)}},{key:"onClose",value:function(e){this.connectionProxy.onClose(e)}}]),e}(),y=t(127),j=t(4),S=t(122),g=t(79),A=t(57),_=t(54),R=t(78),N=t(125),T=t(121),k=t(139),B=t(52),F=t(51),x=t(126),I=t(140),w=t(10),D=Object(w.a)((function(e){return e.refData}),(function(e){return e.currencyPairs}));!function(e){e.LOAD_REF_DATA="REF_DATA/LOAD_REF_DATA",e.LOAD_REF_DATA_ACK="REF_DATA/LOAD_REF_DATA_ACK",e.LOAD_REF_DATA_NACK="REF_DATA/LOAD_REF_DATA_NACK"}(m||(m={}));var P,L={loadRefData:f(m.LOAD_REF_DATA),loadRefDataAck:f(m.LOAD_REF_DATA_ACK),loadRefDataNack:f(m.LOAD_REF_DATA_NACK)};!function(e){e.SELECT_CURRENCY_PAIR="SELECTION/SELECT_CURRENCY_PAIR"}(P||(P={}));var U={selectCurrencyPair:f(P.SELECT_CURRENCY_PAIR)},M=t(65),G=t(66),H=t.n(G);function K(e){return"undefined"===typeof e?["",""]:[e.slice(0,3),e.slice(3)]}function z(e){var n=K(e),t=Object(j.a)(n,2);return[t[0],t[1]].join(" / ")}var W,V=function(e){return H()(e).format("0,0.00")};!function(e){e.SUBSCRIBE_TO_TICKER="TICKER/SUBSCRIBE_TO_TICKER"}(W||(W={}));var q,Y={subscribeToTicker:f(W.SUBSCRIBE_TO_TICKER)};!function(e){e.SUBSCRIBE_TO_CANDLES="CANDLES/SUBSCRIBE_TO_CANDLES",e.UNSUBSCRIBE_FROM_CANDLES="CANDLES/UNSUBSCRIBE_FROM_CANDLES"}(q||(q={}));var Z,J={subscribeToCandles:f(q.SUBSCRIBE_TO_CANDLES),unsubscribeFromCandles:f(q.UNSUBSCRIBE_FROM_CANDLES)};!function(e){e.BOOTSTRAP_APP="APP/BOOTSTRAP_APP"}(Z||(Z={}));var X,$={bootstrapApp:f(Z.BOOTSTRAP_APP)},Q=Object(w.a)((function(e){return e.selection}),(function(e){return e.currencyPair})),ee=Object(y.a)((function(e,n,t){var o=t.connection;return e.pipe(Object(R.a)(Z.BOOTSTRAP_APP),Object(N.a)((function(){return console.log("Bootstrap App"),o.connect(),e.pipe(Object(R.a)(a.CHANGE_CONNECTION_STATUS),Object(T.a)((function(e){return e.payload===r.Connected})),Object(N.a)((function(){return Object(S.a)(Object(g.a)(L.loadRefData()),e.pipe(Object(R.a)(m.LOAD_REF_DATA_ACK),Object(k.a)(1),Object(B.a)((function(){var e=D(n.value),t=[U.selectCurrencyPair({currencyPair:Q(n.value)||e[0]})],r=e.map((function(e){return Y.subscribeToTicker({symbol:e})})),a=e.map((function(e){return J.subscribeToCandles({symbol:e,timeframe:"5m"})}));return Object(S.a)(Object(A.a)(t),Object(A.a)(r),Object(A.a)(a))}))))})))})))}),(function(e,n){return e.pipe(Object(R.a)(P.SELECT_CURRENCY_PAIR),Object(N.a)((function(e){var t=e.payload.currencyPair,r=K(t),a=Object(j.a)(r,2)[1];return n.pipe(Object(F.a)((function(e){return e.ticker[t]})),Object(x.a)(),Object(T.a)((function(e){return"undefined"!==typeof e})),Object(I.a)((function(e){var n;return document.title="(".concat(null===(n=e.lastPrice)||void 0===n?void 0:n.toFixed(2)," ").concat(a,") Crypto Trader")})),Object(B.a)((function(){return _.a})))})))})),ne=t(7),te=t(132),re=t(128),ae=t(138),oe=t(129),ce=t(130),ie=t(131),ue=t(43),le=Object(y.a)((function(e,n,t){var r=t.connection;return e.pipe(Object(R.a)(a.SEND_MESSAGE),Object(B.a)((function(e){return r.send(JSON.stringify(e.payload)),_.a})))}),(function(e){return e.pipe(Object(R.a)(a.SUBSCRIBE_TO_CHANNEL,a.UNSUBSCRIBE_FROM_CHANNEL),Object(re.a)((function(n){var t=n.type===a.SUBSCRIBE_TO_CHANNEL;return Object(S.a)(e.pipe(Object(R.a)(a.RECEIVE_MESSAGE),Object(T.a)((function(e){return t&&"subscribed"===e.payload.event&&e.payload.channel===n.payload.channel||!t&&"unsubscribed"===e.payload.event||"error"===e.payload.event})),Object(k.a)(1),Object(ae.a)(5e3),Object(F.a)((function(e){if("error"===e.payload.event)return t?O.subscribeToChannelNack({error:e.payload.msg}):O.unsubscribeFromChannelNack();var r=e.payload,a=r.channel,o=r.chanId;return t?O.subscribeToChannelAck({channel:a,channelId:o,request:n.payload}):O.unsubscribeFromChannelAck({channelId:o})})),Object(oe.a)((function(){return t?Object(ue.of)(O.subscribeToChannelNack({error:"Timeout"})):Object(ue.of)(O.unsubscribeFromChannelNack())}))),t?Object(ue.of)(O.sendMessage(Object(ne.a)({event:"subscribe"},n.payload))):Object(ue.of)(O.sendMessage({event:"unsubscribe",chanId:n.payload.channelId})))})))}),(function(e){return e.pipe(Object(R.a)(a.SUBSCRIBE_TO_CHANNEL_ACK),Object(B.a)((function(n){var t=n.payload.channelId;return e.pipe(Object(R.a)(a.RECEIVE_MESSAGE),Object(T.a)((function(e){return e.payload[0]===t})),Object(F.a)((function(){return null})),Object(ce.a)(2e4),Object(T.a)((function(e){return 0===e.length})),Object(F.a)((function(){return O.staleSubscription({channelId:t})})),Object(ie.a)(Object(S.a)(e.pipe(Object(R.a)(a.UNSUBSCRIBE_FROM_CHANNEL),Object(T.a)((function(e){return e.payload.channelId===t}))),e.pipe(Object(R.a)(a.CHANGE_CONNECTION_STATUS),Object(T.a)((function(e){return e.payload===r.Connected}))))))})))}),(function(e,n,t){t.connection;return e.pipe(Object(R.a)(a.CHANGE_CONNECTION_STATUS),Object(T.a)((function(e){return e.payload===r.Disconnected})),Object(N.a)((function(){return Object(te.a)(1e3).pipe(Object(F.a)((function(){return $.bootstrapApp()})))})))}));!function(e){e.SUBSCRIBE_TO_TRADES="TRADES/SUBSCRIBE_TO_TRADES",e.UNSUBSCRIBE_FROM_TRADES="TRADES/UNSUBSCRIBE_FROM_TRADES"}(X||(X={}));var se,de={subscribeToTrades:f(X.SUBSCRIBE_TO_TRADES),unsubscribeFromTrades:f(X.UNSUBSCRIBE_FROM_TRADES)},fe=t(13),be=t(9),me=Object(w.a)((function(e){return e.subscriptions}),(function(e){return e})),Oe=Object(w.a)(me,(function(e){return Object(be.memoize)((function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.keys(e).map(Number);return r.find((function(r){return e[r].channel===n&&Object.keys(t).every((function(n){return t[n]===e[r].request[n]}))}))}),(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[e].concat(Object(fe.a)(Object.keys(n).sort().map((function(e){return"".concat(e,"=").concat(n[e])})))).join(":")}))})),pe=Object(w.a)(me,(function(e){return function(n){var t;return Boolean(null===(t=e[n])||void 0===t?void 0:t.isStale)}})),ve=Object(y.a)((function(e){return e.pipe(Object(R.a)(X.SUBSCRIBE_TO_TRADES),Object(F.a)((function(e){var n=e.payload.symbol,t={channel:"trades",symbol:"t".concat(n)};return O.subscribeToChannel(t)})))}),(function(e,n){return e.pipe(Object(R.a)(X.UNSUBSCRIBE_FROM_TRADES),Object(B.a)((function(e){var t=e.payload.symbol,r=[],a=Oe(n.value)("trades",{symbol:"t".concat(t)});return"undefined"!==typeof a?r.push(O.unsubscribeFromChannel({channelId:a})):console.warn("Failed to find trades subscription"),Object(A.a)(r)})))})),Ee=t(133),Ce=Object(y.a)((function(e){return e.pipe(Object(R.a)(m.LOAD_REF_DATA),Object(N.a)((function(){return Object(Ee.a)("data/currencyPairs.json").pipe(Object(N.a)((function(e){return e.json()})),Object(F.a)((function(e){return L.loadRefDataAck({currencyPairs:e})})),Object(oe.a)((function(){return Object(g.a)(L.loadRefDataNack())})))})))})),he=Object(y.a)((function(e){return e.pipe(Object(R.a)(W.SUBSCRIBE_TO_TICKER),Object(F.a)((function(e){var n=e.payload.symbol,t={channel:"ticker",symbol:"t".concat(n)};return O.subscribeToChannel(t)})))})),ye=Object(y.a)((function(e){return e.pipe(Object(R.a)(q.SUBSCRIBE_TO_CANDLES),Object(F.a)((function(e){var n=e.payload,t=n.symbol,r={channel:"candles",key:["trade",n.timeframe,"t".concat(t)].join(":")};return O.subscribeToChannel(r)})))}),(function(e,n){return e.pipe(Object(R.a)(q.UNSUBSCRIBE_FROM_CANDLES),Object(B.a)((function(e){var t=e.payload,r=t.symbol,a=t.timeframe,o=[],c=Oe(n.value)("candles",{key:["trade",a,"t".concat(r)].join(":")});return"undefined"!==typeof c?o.push(O.unsubscribeFromChannel({channelId:c})):console.warn("Failed to find candles subscription"),Object(A.a)(o)})))})),je=t(134),Se=t(135);!function(e){e.SUBSCRIBE_TO_BOOK="BOOK/SUBSCRIBE_TO_BOOK",e.UNSUBSCRIBE_FROM_BOOK="BOOK/UNSUBSCRIBE_FROM_BOOK"}(se||(se={}));var ge,Ae={subscribeToBook:f(se.SUBSCRIBE_TO_BOOK),unsubscribeFromBook:f(se.UNSUBSCRIBE_FROM_BOOK)},_e=Object(y.a)((function(e,n){var t=n.pipe(Object(je.a)());return e.pipe(Object(R.a)(P.SELECT_CURRENCY_PAIR),Object(Se.a)(t),Object(N.a)((function(e){var n=Object(j.a)(e,2),t=n[0],r=Object(j.a)(n[1],2),a=r[0],o=(r[1],Q(a)),c=t.payload.currencyPair,i=[];o&&i.push(J.unsubscribeFromCandles({symbol:o,timeframe:"1m"}),Ae.unsubscribeFromBook({symbol:o}),de.unsubscribeFromTrades({symbol:o}));var u=[J.subscribeToCandles({symbol:c,timeframe:"1m"}),Ae.subscribeToBook({symbol:c}),de.subscribeToTrades({symbol:c})];return Object(A.a)([].concat(i,u))})))})),Re=Object(y.a)((function(e){return e.pipe(Object(R.a)(se.SUBSCRIBE_TO_BOOK),Object(F.a)((function(e){var n=e.payload.symbol,t={channel:"book",symbol:"t".concat(n),prec:"R0"};return O.subscribeToChannel(t)})))}),(function(e,n){return e.pipe(Object(R.a)(se.UNSUBSCRIBE_FROM_BOOK),Object(B.a)((function(e){var t=e.payload.symbol,r=[],a=Oe(n.value)("book",{symbol:"t".concat(t)});return"undefined"!==typeof a?r.push(O.unsubscribeFromChannel({channelId:a})):console.warn("Failed to find book subscription"),Object(A.a)(r)})))})),Ne=t(136);!function(e){e.UPDATE_LATENCY="PING/UPDATE_LATENCY"}(ge||(ge={}));var Te,ke={updateLatency:f(ge.UPDATE_LATENCY)},Be=Object(y.a)((function(e){return e.pipe(Object(R.a)(a.CHANGE_CONNECTION_STATUS),Object(T.a)((function(e){return e.payload===r.Connected})),Object(N.a)((function(){return Object(Ne.a)(5e3).pipe(Object(N.a)((function(n){var t=n+1,r=Date.now();return Object(S.a)(e.pipe(Object(R.a)(a.RECEIVE_MESSAGE),Object(T.a)((function(e){return!Array.isArray(e.payload)&&"pong"===e.payload.event&&e.payload.cid===t})),Object(k.a)(1),Object(ae.a)(4900),Object(F.a)((function(){return ke.updateLatency({latency:Date.now()-r})})),Object(oe.a)((function(){return Object(g.a)(ke.updateLatency({latency:-1}))}))),Object(g.a)(O.sendMessage({event:"ping",cid:t})))})))})))})),Fe=t(6);function xe(e){return Array.isArray(e.payload)&&"hb"===e.payload[1]}function Ie(e){return"subscribed"===e.payload.event}function we(e){return"unsubscribed"===e.payload.event}function De(e){return"error"===e.payload.event}var Pe={};function Le(e,n){return Object(j.a)(n.payload,2)[1].sort((function(e,n){return n[1]-e[1]})).map((function(e){var n=Object(j.a)(e,4);return{id:n[0],timestamp:n[1],amount:n[2],price:n[3]}}))}function Ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=Object(j.a)(n.payload,3),r=t[2],a=Object(j.a)(r,4),o=a[0],c=a[1],i=a[2],u=a[3],l=e.findIndex((function(e){return e.id===o})),s={id:o,timestamp:c,amount:i,price:u};if(l>=0){var d=e.slice();return d.splice(l,1,s),d}return[s].concat(Object(fe.a)(e))}var Me,Ge,He,Ke=b((Te={},Object(Fe.a)(Te,a.CHANGE_CONNECTION_STATUS,(function(e,n){return n.payload===r.Connected?Pe:e})),Object(Fe.a)(Te,a.RECEIVE_MESSAGE,(function(e,n){if(xe(n)||Ie(n)||De(n))return e;var t=n.meta||{},r=t.channel,a=t.request;if("trades"===r){var o=a.symbol.slice(1);if(we(n)){var c=Object(ne.a)({},e);return delete c[o],c}var i=(Array.isArray(n.payload[1])?Le:Ue)(e[o],n);return Object(ne.a)({},e,Object(Fe.a)({},o,i.slice(0,100)))}return e})),Te),Pe),ze={},We=b((Me={},Object(Fe.a)(Me,a.CHANGE_CONNECTION_STATUS,(function(e,n){return n.payload===r.Connected?ze:e})),Object(Fe.a)(Me,a.SUBSCRIBE_TO_CHANNEL_ACK,(function(e,n){var t=n.payload,r=t.request,a=t.channel,o=t.channelId;return Object(ne.a)({},e,Object(Fe.a)({},o,{channel:a,request:r}))})),Object(Fe.a)(Me,a.UNSUBSCRIBE_FROM_CHANNEL_ACK,(function(e,n){var t=n.payload.channelId,r=Object(ne.a)({},e);return delete r[t],r})),Object(Fe.a)(Me,a.RECEIVE_MESSAGE,(function(e,n){if(xe(n)){var t=Object(j.a)(n.payload,1)[0];return Boolean(e[t].isStale)?Object(ne.a)({},e,Object(Fe.a)({},t,Object(ne.a)({},e[t],{isStale:!1}))):e}return e})),Object(Fe.a)(Me,a.STALE_SUBSCRIPTION,(function(e,n){var t=n.payload.channelId;return Object(ne.a)({},e,Object(Fe.a)({},t,Object(ne.a)({},e[t],{isStale:!0})))})),Me),ze),Ve=b(Object(Fe.a)({},m.LOAD_REF_DATA_ACK,(function(e,n){var t=n.payload.currencyPairs;return Object(ne.a)({},e,{currencyPairs:t})})),{currencyPairs:[]}),qe={},Ye=b((Ge={},Object(Fe.a)(Ge,a.CHANGE_CONNECTION_STATUS,(function(e,n){return n.payload===r.Connected?qe:e})),Object(Fe.a)(Ge,a.RECEIVE_MESSAGE,(function(e,n){if(xe(n))return e;var t=n.meta||{},r=t.channel,a=t.request;if("ticker"===r){var o=a.symbol.slice(1),c=Object(j.a)(n.payload,2),i=Object(j.a)(c[1],10),u=i[0],l=i[1],s=i[2],d=i[3],f=i[4],b=i[5],m=i[6],O=i[7],p=i[8],v=i[9];return Object(ne.a)({},e,Object(Fe.a)({},o,{currencyPair:o,bid:u,bidSize:l,ask:s,askSize:d,dailyChange:f,dailyChangeRelative:b,lastPrice:m,volume:O,high:p,low:v}))}return e})),Ge),qe),Ze=function(e,n){return[e,n].join(":")},Je={};function Xe(e,n){return Object(j.a)(n.payload,2)[1].map((function(e){var n=Object(j.a)(e,6);return{timestamp:n[0],open:n[1],close:n[2],high:n[3],low:n[4],volume:n[5]}})).sort((function(e,n){return n.timestamp-e.timestamp}))}function $e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=Object(j.a)(n.payload,2),r=t[1],a=Object(j.a)(r,6),o=a[0],c=a[1],i=a[2],u=a[3],l=a[4],s=a[5],d=e.findIndex((function(e){return e.timestamp===o})),f={timestamp:o,open:c,close:i,high:u,low:l,volume:s};if(d>=0){var b=e.slice();return b.splice(d,1,f),b}return[f].concat(Object(fe.a)(e))}var Qe,en=b((He={},Object(Fe.a)(He,a.CHANGE_CONNECTION_STATUS,(function(e,n){return n.payload===r.Connected?Je:e})),Object(Fe.a)(He,a.RECEIVE_MESSAGE,(function(e,n){if(xe(n)||Ie(n)||De(n))return e;var t=n.meta||{},r=t.channel,a=t.request;if("candles"===r){var o=a.key.split(":"),c=Object(j.a)(o,3),i=c[1],u=c[2].slice(1),l=Ze(u,i);if(we(n)){var s=Object(ne.a)({},e);return delete s[l],s}var d=(Array.isArray(n.payload[1][0])?Xe:$e)(e[l],n);return Object(ne.a)({},e,Object(Fe.a)({},l,d.slice(0,100)))}return e})),He),Je),nn=b(Object(Fe.a)({},P.SELECT_CURRENCY_PAIR,(function(e,n){var t=n.payload.currencyPair;return Object(ne.a)({},e,{currencyPair:t})})),{}),tn={};function rn(e,n){return Object(j.a)(n.payload,2)[1].map((function(e){var n=Object(j.a)(e,3);return{id:n[0],price:n[1],amount:n[2]}}))}function an(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=Object(j.a)(n.payload,2),r=t[1],a=Object(j.a)(r,3),o=a[0],c=a[1],i=a[2],u=e.findIndex((function(e){return e.id===o})),l={id:o,price:c,amount:i};if(0===c&&u>=0){var s=e.slice();return s.splice(u,1),s}if(u>=0){var d=e.slice();return d.splice(u,1,l),d}return[].concat(Object(fe.a)(e),[l])}var on=b((Qe={},Object(Fe.a)(Qe,a.CHANGE_CONNECTION_STATUS,(function(e,n){return n.payload===r.Connected?tn:e})),Object(Fe.a)(Qe,a.RECEIVE_MESSAGE,(function(e,n){if(xe(n)||Ie(n)||De(n))return e;var t=n.meta||{},r=t.channel,a=t.request;if("book"===r){var o=a.symbol.slice(1);if(we(n)){var c=Object(ne.a)({},e);return delete c[o],c}var i=(Array.isArray(n.payload[1][0])?rn:an)(e[o],n);return Object(ne.a)({},e,Object(Fe.a)({},o,i))}return e})),Qe),tn),cn=b(Object(Fe.a)({},ge.UPDATE_LATENCY,(function(e,n){var t=n.payload.latency;return Object(ne.a)({},e,{latency:t})})),{}),un=Object(y.a)(ee,Ce,le,ve,he,ye,_e,Re,Be),ln=Object(s.c)({refData:Ve,subscriptions:We,trades:Ke,ticker:Ye,candles:en,selection:nn,book:on,ping:cn}),sn=new h(new C("wss://api-pub.bitfinex.com/ws/2")),dn={connection:sn},fn=Object(d.a)({dependencies:dn}),bn=p({connection:sn}),mn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d;var On=t(35),pn=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,t=Object(o.useMemo)((function(){return Object(be.throttle)(e,n)}),[e,n]);return Object(o.useEffect)((function(){return function(){t.cancel()}}),[t]),t},vn=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,t=Object(o.useState)(e),r=Object(j.a)(t,2),a=r[0],c=r[1],i=pn(c,n);return i(e),a},En=function(e){return V(e.value)},Cn=function(e){return(n=e.value)?n.toString():"";var n},hn=function(e){return n=e.value,H()(n).format("0.00 a");var n},yn=function(e){return n=e.value,M.DateTime.fromMillis(n).toLocaleString(M.DateTime.TIME_24_WITH_SECONDS);var n},jn=function(e){Object(o.useEffect)((function(){e&&e.sizeColumnsToFit();var n=Object(be.debounce)((function(){e&&e.sizeColumnsToFit()}),200);return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[e])},Sn=t(1),gn=t(2),An={Bid:"#00AD08",Ask:"#FF264D",BidTransparent:"rgba(0, 173, 8, 0.2)",AskTransparent:"rgba(255, 38, 77, 0.2)",Positive:"#00AD08",Negative:"#FF264D",Orange:"#FFA41B",White:"#FFF",BackgroundColor:"#222",Label:"rgba(245, 245, 245, 0.64)",Border:"#424242",LightGray:"rgba(245, 245, 245, 0.64)",DarkGray:"#63666D"};function _n(){var e=Object(Sn.a)(["\n  position: relative;\n  grid-area: icon;\n  align-self: flex-end;\n  margin-bottom: 5px;\n\n  @keyframes loadingAnimation {\n    0%,\n    80%,\n    100% {\n      box-shadow: 0 0 ",";\n      height: ","px;\n    }\n    40% {\n      box-shadow: 0 -","px ",";\n      height: ","px;\n    }\n  }\n\n  ",';\n\n  &:before,\n  &:after {\n    position: absolute;\n    content: "";\n    ',"\n  }\n\n  &:before {\n    left: ","px;\n    animation-delay: -0.2s;\n  }\n\n  &:after {\n    left: ","px;\n    animation-delay: 0.2s;\n  }\n"]);return _n=function(){return e},e}function Rn(){var e=Object(Sn.a)(["\n  font-size: 11px;\n  font-family: FiraSans-Light;\n  grid-area: title;\n  align-self: flex-start;\n  color: ",";\n"]);return Rn=function(){return e},e}function Nn(){var e=Object(Sn.a)(['\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  margin: auto;\n  z-index: 1;\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: 1fr 1fr;\n  grid-template-areas:\n    "icon"\n    "title";\n\n  justify-items: center;\n']);return Nn=function(){return e},e}var Tn="\n    background: ".concat(An.LightGray,";\n    animation: loadingAnimation 1s infinite ease-in-out;\n    width: ").concat(5,"px;\n    height: ").concat(20,"px;\n"),kn=gn.a.div(Nn()),Bn=gn.a.div(Rn(),An.LightGray),Fn=gn.a.div(_n(),An.LightGray,20,5,An.LightGray,24,Tn,Tn,-7,7),xn=function(e){var n=e.title,t=void 0===n?"Loading...":n;return c.a.createElement(kn,null,c.a.createElement(Fn,null),c.a.createElement(Bn,null,t))};function In(){var e=Object(Sn.a)(["\n  width: 100%;\n  height: 100%;\n  font-family: FiraSans-Light;\n  position: relative;\n"]);return In=function(){return e},e}var wn=gn.a.div(In());function Dn(){var e=Object(Sn.a)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: rgba(34, 34, 34, 0.7);\n  pointer-events: none;\n  z-index: 1;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return Dn=function(){return e},e}var Pn=gn.a.div(Dn()),Ln=function(){return c.a.createElement(Pn,null,c.a.createElement(xn,{title:"Stale..."}))},Un=function(e){var n=e.trades,t=e.isStale,r=vn(n,500),a=Object(o.useState)(),i=Object(j.a)(a,2),u=i[0],l=i[1],s=[{headerName:"Id",field:"id",hide:!0},{headerName:"Amount",field:"amount",valueFormatter:function(e){return Cn({value:Math.abs(e.value)})}},{headerName:"Price",field:"price",cellStyle:function(e){return{color:e.value<0?An.Ask:An.Bid}},valueFormatter:En},{headerName:"Time",field:"timestamp",valueFormatter:yn,cellStyle:function(){return{color:An.LightGray}}}];return jn(u),c.a.createElement(wn,{className:"ag-theme-balham-dark"},t&&c.a.createElement(Ln,null),c.a.createElement(On.AgGridReact,{columnDefs:s,rowData:r,deltaRowDataMode:!0,getRowNodeId:function(e){return e.id},onGridReady:function(e){l(e.api)},noRowsOverlayComponent:"customLoadingOverlay",frameworkComponents:{customLoadingOverlay:xn}}))},Mn=Object(w.a)((function(e){return e.trades}),(function(e){return Object(be.memoize)((function(n){return e[n]}))})),Gn=Object(l.b)((function(e){var n=Q(e),t=n?Mn(e)(n):[],r=Oe(e)("trades");return{trades:t,isStale:"undefined"!==typeof r&&pe(e)(r)}}))(Un),Hn=[],Kn=function(e){return e.candles},zn=Object(w.a)(Kn,(function(e){return Object(be.memoize)((function(n,t){return e[Ze(n,t)]||Hn}),(function(e,n){return"".concat(e,":").concat(n)}))})),Wn=function(e){return e.ticker},Vn=Object(w.a)(Wn,(function(e){return Object(be.memoize)((function(n){return e[n]}))})),qn=Object(w.a)(D,Wn,(function(e,n){return e.map((function(e){return Object(ne.a)({currencyPair:e},n[e])}))})),Yn=Object(w.a)(D,Q,(function(e,n){var t=[],r=e.indexOf(n||"");return r>=0&&(t=Object(be.range)(r-2,r+3).map((function(n){return(t=e,function(e){return t[(e%t.length+t.length)%t.length]})(n);var t}))),{currencyPairs:t,selectedCurrencyPairIndex:r}})),Zn=Object(w.a)(qn,Kn,Oe,me,(function(e,n,t,r){return e.map((function(e){var a=t("ticker",{symbol:"t".concat(e.currencyPair)});return Object(ne.a)({},e,{prices:(n[Ze(e.currencyPair,"5m")]||[]).map((function(e){return e.close})),isStale:Boolean(!!a&&r[a].isStale)})}))})),Jn=function(e){var n=Object(o.useRef)();return Object(o.useEffect)((function(){n.current=e}),[e]),n.current};function Xn(){var e=Object(Sn.a)(["\n  grid-area: change;\n  margin-right: 0;\n  margin-left: auto;\n  color: ",";\n"]);return Xn=function(){return e},e}function $n(){var e=Object(Sn.a)(["\n  grid-area: relativeChange;\n  font-size: 18px;\n  color: ",";\n  display: flex;\n  font-family: FiraSans-Medium;\n"]);return $n=function(){return e},e}function Qn(){var e=Object(Sn.a)(["\n  color: ",";\n  grid-area: price;\n  margin-right: 0;\n  margin-left: auto;\n"]);return Qn=function(){return e},e}function et(){var e=Object(Sn.a)(["\n  color: ",";\n  grid-area: currencyPair;\n"]);return et=function(){return e},e}function nt(){var e=Object(Sn.a)(['\n  position: relative;\n  cursor: pointer;\n  display: grid;\n  grid-template-rows: 25px 1fr;\n  height: 50px;\n  grid-template-columns: repeat(2, 1fr);\n  grid-template-areas:\n    "currencyPair price"\n    "relativeChange change";\n  font-size: 12px;\n  padding: 5px 10px;\n  border: 1px solid\n    ',";\n\n  &:hover {\n    background-color: #2d3436;\n  }\n\n  "," {\n    background: none;\n    top: 12px;\n    bottom: -12px;\n  }\n"]);return nt=function(){return e},e}var tt=gn.a.div(nt(),(function(e){return e.isActive?An.Orange:An.Border}),Pn),rt=gn.a.div(et(),An.White),at=gn.a.div(Qn(),An.White),ot=gn.a.div($n(),(function(e){return e.isPositive?An.Positive:An.Negative})),ct=gn.a.div(Xn(),(function(e){return e.isPositive?An.Positive:An.Negative}));function it(){var e=Object(Sn.a)(["\n  ","\n\n  "," {\n    animation: ",";\n    transform: ",";\n  }\n"]);return it=function(){return e},e}function ut(){var e=Object(Sn.a)(["\n  display: grid;\n  grid-template-columns: ",";\n  width: 100%;\n"]);return ut=function(){return e},e}var lt=gn.a.div(ut(),(function(e){var n=e.itemCount;return"repeat(".concat(n,", minmax(240px, 1fr))")})),st=gn.a.div(it(),(function(e){var n=e.itemCount;return Object(be.range)(0,n).map((function(e){var t=Math.floor(n/2),r=1-(t-(e<=t?e:t-Math.abs(t-e)))/10;return"\n            @keyframes slide-in-".concat(e," {\n                100% { transform: scale(").concat(r,", ").concat(r,") translateX(0%);; }\n            }\n            ")})).reduce((function(e,n){return e+n}),"")}),tt,(function(e){var n=e.index;return"slide-in-".concat(n," 0.5s forwards;")}),(function(e){var n=e.direction;return"translateX(".concat("left"===n?100:-100,"%);")}));function dt(){var e=Object(Sn.a)(["\n  display: inline-block;\n"]);return dt=function(){return e},e}function ft(){var e=Object(Sn.a)(["\n  color: ",";\n"]);return ft=function(){return e},e}function bt(){var e=Object(Sn.a)([""]);return bt=function(){return e},e}function mt(){var e=Object(Sn.a)(["\n  display: flex;\n"]);return mt=function(){return e},e}var Ot=gn.a.div(mt()),pt=gn.a.div(bt()),vt=(gn.a.div(ft(),An.Orange),gn.a.span(dt())),Et=function(e){var n=e.value,t=e.delay,r=void 0===t?0:t,a=e.scale,i=void 0===a?1:a,u=e.duration,l=void 0===u?200:u,s=Object(o.createRef)();return Object(o.useEffect)((function(){var e,n=void 0,t=void 0;if("function"===typeof(null===(e=s.current)||void 0===e?void 0:e.animate)){var a=function(){var e;n=null===(e=s.current)||void 0===e?void 0:e.animate([{color:An.Orange,transform:"scale(1)"}].concat(Object(fe.a)(1===i?[]:[{color:An.White,transform:"scale(".concat(i,")")}]),[{color:An.White,transform:"scale(1)"}]),{duration:l,iterations:1})};r?t=setTimeout((function(){return requestAnimationFrame(a)}),r):requestAnimationFrame(a)}return function(){t&&clearTimeout(t),n&&n.cancel()}}),[n]),c.a.createElement(vt,{ref:s},n)},Ct=function(e){var n=Object(o.createRef)(),t=e.value,r=e.effect,a=void 0===r?"default":r,i=Jn(t),u=Object(o.useState)([]),l=Object(j.a)(u,2),s=Object(j.a)(l[0],2),d=s[0],f=s[1],b=l[1];Object(o.useEffect)((function(){b(function(e,n){if(!e||!n)return[e,""];for(var t=Math.min(e.length,n.length),r=0,a=0;a<t&&e[a]===n[a];a++)r++;return[e.slice(0,r),e.slice(r,e.length)]}(t||"",i||""))}),[t]);var m="zoom"===a?null===f||void 0===f?void 0:f.split("").map((function(e,n){return c.a.createElement(Et,{key:n,value:e,delay:100*n,scale:2,duration:300})})):c.a.createElement(Et,{value:f});return c.a.createElement(Ot,null,c.a.createElement(pt,null,d),c.a.createElement("div",{ref:n},m))};function ht(){var e=Object(Sn.a)(["\n  font-size: 16px;\n  line-height: 20px;\n  width: 20px;\n"]);return ht=function(){return e},e}var yt=gn.a.i(ht()),jt=function(e){var n=e.value,t=Object(o.useState)(!0),r=Object(j.a)(t,2),a=r[0],i=r[1];Object(o.useEffect)((function(){i(!1);var e=setTimeout((function(){return i(!0)}),5e3);return function(){clearTimeout(e)}}),[n]);var u=a?"":n>0?"arrow_upward":n<0?"arrow_downward":"";return c.a.createElement(yt,{className:"material-icons"},u)},St=function(e){var n=e.currencyPair,t=e.lastPrice,r=e.dailyChange,a=e.dailyChangeRelative,o=e.onClick,i=e.isActive,u=e.isStale,l=r>0,s=a?100*a:void 0;return c.a.createElement(tt,{onClick:o,isActive:!!i},u?c.a.createElement(Ln,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(rt,null,z(n)),c.a.createElement(at,null,c.a.createElement(Ct,{value:V(t),effect:"zoom"})),c.a.createElement(ot,{isPositive:l},c.a.createElement(jt,{value:a}),c.a.createElement(Ct,{value:null===s||void 0===s?void 0:s.toFixed(2)}),s&&"%"),c.a.createElement(ct,{isPositive:l},c.a.createElement(Ct,{value:null===r||void 0===r?void 0:r.toFixed(2)}))))},gt=Object(l.b)((function(e,n){var t=n.currencyPair,r=Q(e),a=Vn(e)(t),o=Oe(e)("ticker",{symbol:"t".concat(t)}),c="undefined"!==typeof o&&pe(e)(o);return{lastPrice:null===a||void 0===a?void 0:a.lastPrice,currencyPair:t,dailyChangeRelative:null===a||void 0===a?void 0:a.dailyChangeRelative,dailyChange:null===a||void 0===a?void 0:a.dailyChange,isActive:r===t,isStale:c}}),(function(e,n){var t=n.currencyPair;return{onClick:function(){return e(U.selectCurrencyPair({currencyPair:t}))}}}))(St),At=function(e){var n=e.currencyPairs,t=e.selectedCurrencyPairIndex,r=Object(o.useState)("left"),a=Object(j.a)(r,2),i=a[0],u=a[1],l=Jn(t);return Object(o.useEffect)((function(){u((l||0)>(t||0)?"right":"left")}),[t]),c.a.createElement(lt,{itemCount:n.length,className:"tickers"},n.map((function(e,t){return c.a.createElement(st,{index:t,itemCount:n.length,key:e,direction:i},c.a.createElement(gt,{currencyPair:e}))})))},_t=Object(l.b)((function(e){var n=Yn(e);return{currencyPairs:n.currencyPairs,selectedCurrencyPairIndex:n.selectedCurrencyPairIndex}}))(At),Rt=t(85),Nt=t(40),Tt=t(56),kt=t.n(Tt);function Bt(){var e=Object(Sn.a)(["\n  width: 100%;\n  height: 100%;\n  display: grid;\n  position: relative;\n"]);return Bt=function(){return e},e}var Ft=gn.a.div(Bt());Nt.theme={colors:["#2b908f","#90ee7e","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],chart:{backgroundColor:{stops:[[0,"#2a2a2b"],[1,"#3e3e40"]]}},xAxis:{labels:{style:{color:"#E0E0E3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",title:{style:{color:"#A0A0A3"}}},yAxis:{gridLineColor:An.Border,labels:{style:{color:"#E0E0E3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",tickWidth:1,title:{style:{color:"#A0A0A3"}}},tooltip:{borderColor:An.Border,backgroundColor:"rgba(0, 0, 0, 0.85)",style:{color:An.White}},plotOptions:{series:{dataLabels:{color:"#F0F0F3",style:{fontSize:"13px"}},marker:{lineColor:"#333"}},boxplot:{fillColor:"#505053"},candlestick:{lineColor:"white"},errorbar:{color:"white"}},legend:{backgroundColor:"rgba(0, 0, 0, 0.5)",itemStyle:{color:"#E0E0E3"},itemHoverStyle:{color:"#FFF"},itemHiddenStyle:{color:"#606063"},title:{style:{color:"#C0C0C0"}}},credits:{style:{color:"#666"}},labels:{style:{color:"#707073"}},drilldown:{activeAxisLabelStyle:{color:"#F0F0F3"},activeDataLabelStyle:{color:"#F0F0F3"}},navigation:{buttonOptions:{symbolStroke:"#DDDDDD",theme:{fill:"#505053"}}},rangeSelector:{buttonTheme:{fill:"#505053",stroke:"#000000",style:{color:"#CCC"},states:{hover:{fill:"#707073",stroke:"#000000",style:{color:"white"}},select:{fill:"#000003",stroke:"#000000",style:{color:"white"}}}},inputBoxBorderColor:"#505053",inputStyle:{backgroundColor:"#333",color:"silver"},labelStyle:{color:"silver"}},navigator:{handles:{backgroundColor:"#666",borderColor:"#AAA"},outlineColor:"#CCC",maskFill:"rgba(255,255,255,0.1)",series:{color:"#7798BF",lineColor:"#A6C7ED"},xAxis:{gridLineColor:"#505053"}},scrollbar:{barBackgroundColor:"#808083",barBorderColor:"#808083",buttonArrowColor:"#CCC",buttonBackgroundColor:"#606063",buttonBorderColor:"#606063",rifleColor:"#FFF",trackBackgroundColor:"#404043",trackBorderColor:"#404043"}},Nt.setOptions(Nt.theme);var xt=function(e){var n=e.candles,t=e.currencyPair,r=e.isStale,a=Object(o.useState)(!0),i=Object(j.a)(a,2),u=i[0],l=i[1],s=Object(o.useState)({time:{useUTC:!1},yAxis:[{labels:{align:"right",x:-3},title:{text:"OHLC"},height:"70%",lineWidth:2,resize:{enabled:!0}},{labels:{align:"right",x:-3},title:{text:"Volume"},top:"75%",height:"25%",offset:0,lineWidth:2}],series:[{type:"candlestick",data:[]},{type:"column",name:"Volume",data:[],yAxis:1}],rangeSelector:{selected:2,buttons:[{type:"minute",count:5,text:"5m"},{type:"minute",count:15,text:"15m"},{type:"minute",count:30,text:"30m"},{type:"hour",count:1,text:"1h"},{type:"hour",count:12,text:"12h"},{type:"all",text:"All"}]}}),d=Object(j.a)(s,2),f=d[0],b=d[1];return Object(o.useEffect)((function(){l(0===n.length);var e=n.map((function(e){var n=e.timestamp,t=Object(Rt.a)(e,["timestamp"]);return Object(ne.a)({x:n},t)})).sort((function(e,n){return e.x-n.x})),r=n.map((function(e){return[e.timestamp,e.volume]})).sort((function(e,n){return e[0]-n[0]}));b({series:[{type:"candlestick",name:t&&z(t),data:e},{type:"column",data:r}],plotOptions:{candlestick:{color:An.Negative,upColor:An.Positive},column:{color:An.LightGray}}})}),[n,t]),c.a.createElement(Ft,{className:"candles-chart"},r&&c.a.createElement(Ln,null),u&&c.a.createElement(xn,null),c.a.createElement(kt.a,{highcharts:Nt,options:f,constructorType:"stockChart"}))},It=Object(l.b)((function(e){var n=Q(e),t=n?zn(e)(n,"1m"):[],r=Oe(e)("candles");return{candles:t,currencyPair:n,isStale:"undefined"!==typeof r&&pe(e)(r)}}))(xt),wt=function(e,n){var t=Object.keys(n).map((function(e){return[e,n[e]].join(":")})).join(";");return'\n        <div style="position: relative;">\n            <div style="height: 30px; position: absolute; z-index: 0; '.concat(t,'"></div>\n            <div style="position: absolute; z-index: 1;">').concat(e,"</div>\n        </div>")},Dt=function(e){var n=e.data,t=(n.bidDepth||0)/n.maxDepth*100;return wt(e.valueFormatted,{"background-color":An.BidTransparent,width:"".concat(t,"%"),left:"-12px"})},Pt=function(e){var n=e.data,t=(n.askDepth||0)/n.maxDepth*100;return wt(e.valueFormatted,{"background-color":An.AskTransparent,width:"".concat(t,"%"),right:"-12px"})};function Lt(){var e=Object(Sn.a)(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  font-family: FiraSans-Light;\n"]);return Lt=function(){return e},e}var Ut=gn.a.div(Lt()),Mt=function(e){var n=e.orders,t=e.isStale,r=Object(o.useState)(),a=Object(j.a)(r,2),i=a[0],u=a[1],l=vn(n,100),s=[{headerName:"Bid Amount",field:"bid.amount",valueFormatter:Cn,cellRenderer:Dt},{headerName:"Bid Price",field:"bid.price",cellStyle:function(){return{color:An.Bid}},type:"numericColumn",valueFormatter:En},{headerName:"Ask Price",field:"ask.price",cellStyle:function(){return{color:An.Ask}},valueFormatter:En},{headerName:"Ask Amount",field:"ask.amount",valueFormatter:function(e){return Cn({value:Math.abs(e.value)})},cellRenderer:Pt}];return jn(i),c.a.createElement(Ut,{className:"ag-theme-balham-dark"},t&&c.a.createElement(Ln,null),c.a.createElement(On.AgGridReact,{columnDefs:s,rowData:l,deltaRowDataMode:!0,getRowNodeId:function(e){var n,t;return[null===(n=e.bid)||void 0===n?void 0:n.id,null===(t=e.ask)||void 0===t?void 0:t.id].join("#")},onGridReady:function(e){u(e.api)},noRowsOverlayComponent:"customLoadingOverlay",frameworkComponents:{customLoadingOverlay:xn}}))},Gt=function(e){return e.book},Ht=(Object(w.a)(Gt,(function(e){return Object(be.memoize)((function(n){return e[n]}))})),Object(w.a)(Gt,(function(e){return Object(be.memoize)((function(n){var t=e[n]||[],r=t.filter((function(e){return e.amount>0})).sort((function(e,n){return n.price-e.price})),a=t.filter((function(e){return e.amount<0})).sort((function(e,n){return e.price-n.price})),o=Math.max(r.length,a.length),c=r.map((function(e){return e.amount})).reduce((function(e,n){return e+n}),0)+a.map((function(e){return Math.abs(e.amount)})).reduce((function(e,n){return e+n}),0),i=[];return Object(be.range)(o).forEach((function(e){var n=r[e],t=a[e];i.push({bid:n,ask:t,bidDepth:n&&(i[e-1]?i[e-1].bidDepth:0)+n.amount,askDepth:t&&(i[e-1]?i[e-1].askDepth:0)+Math.abs(t.amount),maxDepth:c})})),i}))}))),Kt=function(e){return Object(be.uniq)(e.map((function(e){return e.price}))).sort((function(e,n){return e-n}))},zt=function(e){return function(n,t){return n.map((function(n){var r=e.filter((function(e){return t(e,n)})).reduce((function(e,n){return e+Math.abs(n.amount)}),0);return{price:n,depth:r}}))}},Wt=Object(w.a)(Gt,(function(e){return Object(be.memoize)((function(n){var t=e[n]||[],r=t.filter((function(e){return e.amount>0})),a=t.filter((function(e){return e.amount<0})),o=Kt(r),c=Kt(a);return{bids:zt(r)(o,(function(e,n){return e.price>=n})),asks:zt(a)(c,(function(e,n){return e.price<=n}))}}))})),Vt=Object(l.b)((function(e){var n=Q(e),t=n?Ht(e)(n):[],r=Oe(e)("book");return{orders:t,isStale:"undefined"!==typeof r&&pe(e)(r)}}))(Mt),qt=t(30);function Yt(){var e=Object(Sn.a)(["\n  width: 100%;\n  height: 100%;\n  display: grid;\n  position: relative;\n"]);return Yt=function(){return e},e}var Zt=gn.a.div(Yt());qt.theme={colors:["#2b908f","#90ee7e","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],chart:{backgroundColor:{stops:[[0,"#2a2a2b"],[1,"#3e3e40"]]}},xAxis:{labels:{style:{color:"#E0E0E3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",title:{style:{color:"#A0A0A3"}}},yAxis:{gridLineColor:An.Border,labels:{style:{color:"#E0E0E3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",tickWidth:1,title:{style:{color:"#A0A0A3"}}},tooltip:{borderColor:An.Border,backgroundColor:"rgba(0, 0, 0, 0.85)",style:{color:An.White}},plotOptions:{series:{dataLabels:{color:"#F0F0F3",style:{fontSize:"13px"}},marker:{lineColor:"#333"}},boxplot:{fillColor:"#505053"},candlestick:{lineColor:"white"},errorbar:{color:"white"}},legend:{backgroundColor:"rgba(0, 0, 0, 0.5)",itemStyle:{color:"#E0E0E3"},itemHoverStyle:{color:"#FFF"},itemHiddenStyle:{color:"#606063"},title:{style:{color:"#C0C0C0"}}},credits:{style:{color:"#666"}},labels:{style:{color:"#707073"}},drilldown:{activeAxisLabelStyle:{color:"#F0F0F3"},activeDataLabelStyle:{color:"#F0F0F3"}},navigation:{buttonOptions:{symbolStroke:"#DDDDDD",theme:{fill:"#505053"}}},rangeSelector:{buttonTheme:{fill:"#505053",stroke:"#000000",style:{color:"#CCC"},states:{hover:{fill:"#707073",stroke:"#000000",style:{color:"white"}},select:{fill:"#000003",stroke:"#000000",style:{color:"white"}}}},inputBoxBorderColor:"#505053",inputStyle:{backgroundColor:"#333",color:"silver"},labelStyle:{color:"silver"}},navigator:{handles:{backgroundColor:"#666",borderColor:"#AAA"},outlineColor:"#CCC",maskFill:"rgba(255,255,255,0.1)",series:{color:"#7798BF",lineColor:"#A6C7ED"},xAxis:{gridLineColor:"#505053"}},scrollbar:{barBackgroundColor:"#808083",barBorderColor:"#808083",buttonArrowColor:"#CCC",buttonBackgroundColor:"#606063",buttonBorderColor:"#606063",rifleColor:"#FFF",trackBackgroundColor:"#404043",trackBorderColor:"#404043"}},qt.setOptions(qt.theme);var Jt=function(e){var n=e.depth,t=e.isStale,r=vn(n,500),a=Object(o.useState)(!0),i=Object(j.a)(a,2),u=i[0],l=i[1],s=Object(o.useState)({chart:{type:"area",animation:!1},title:{text:""},legend:{enabled:!1},series:[{name:"bids",type:"area",data:[]},{name:"asks",type:"area",data:[]}],xAxis:{labels:{autoRotation:!1}},yAxis:{title:{text:""},labels:{enabled:!1}},plotOptions:{area:{marker:{enabled:!1,states:{hover:{enabled:!1}}}}}}),d=Object(j.a)(s,2),f=d[0],b=d[1];return Object(o.useEffect)((function(){var e=r.bids,n=r.asks;l(0===e.length&&0===n.length),b({xAxis:{categories:[].concat(Object(fe.a)(e),Object(fe.a)(n)).map((function(e){return e.price.toString()})),labels:{step:5,formatter:function(){return Number.parseFloat(this.value.toString()).toFixed(0)}}},series:[{name:"bids",type:"area",data:[].concat(Object(fe.a)(e.map((function(e){return e.depth}))),Object(fe.a)(n.map((function(){return null})))),color:An.Bid},{name:"asks",type:"area",data:[].concat(Object(fe.a)(e.map((function(){return null}))),Object(fe.a)(n.map((function(e){return e.depth})))),color:An.Ask}]})}),[r]),c.a.createElement(Zt,null,t&&c.a.createElement(Ln,null),u&&c.a.createElement(xn,null),c.a.createElement(kt.a,{highcharts:qt,options:f,constructorType:"chart"}))},Xt=Object(l.b)((function(e){var n=Q(e),t=n?Wt(e)(n):{bids:[],asks:[]},r=Oe(e)("book");return{depth:t,isStale:"undefined"!==typeof r&&pe(e)(r)}}))(Jt);function $t(){var e=Object(Sn.a)(["\n  width: 100%;\n  height: 100%;\n\n  .selected-row {\n    font-family: FiraSans-Medium;\n  }\n\n  .stale-row {\n    opacity: 0.6;\n  }\n"]);return $t=function(){return e},e}var Qt=gn.a.div($t());function er(){var e=Object(Sn.a)(["\n  fill: none;\n"]);return er=function(){return e},e}var nr=gn.a.svg(er()),tr=function(e){var n=e.values,t=e.width,r=void 0===t?50:t,a=e.height,o=void 0===a?25:a,i=n.length-1,u=Math.min.apply(Math,Object(fe.a)(n)),l=Math.max.apply(Math,Object(fe.a)(n))-u,s=function(e){return e/i*r},d=function(e){return o-(e-u)*o/l};if(0===n.length)return c.a.createElement("div",null);var f="M ".concat(s(0)," ").concat(d(n[0])," ");return f+=n.map((function(e,n){var t=s(n),r=d(e);return"L  ".concat(t,"  ").concat(r," ")})),c.a.createElement(nr,{viewBox:"0 0 ".concat(r," ").concat(o)},c.a.createElement("path",{d:f,style:{stroke:An.LightGray}}))};function rr(){var e=Object(Sn.a)(["\n  padding: 0 5px;\n"]);return rr=function(){return e},e}var ar=gn.a.div(rr()),or=function(e){var n=e.value;return c.a.createElement(ar,null,c.a.createElement(tr,{values:n}))},cr=t(83),ir=t(84),ur=Ct,lr=function(e){Object(ir.a)(t,e);var n=Object(cr.a)(t);function t(e){var r;return Object(v.a)(this,t),(r=n.call(this,e)).state={valueFormatted:e.valueFormatted},r}return Object(E.a)(t,[{key:"refresh",value:function(e){return this.setState({valueFormatted:e.valueFormatted}),!0}},{key:"render",value:function(){var e=this.state.valueFormatted;return c.a.createElement(ur,{value:e})}}]),t}(o.Component),sr=function(e){var n=e.tickers,t=e.selectedCurrencyPair,r=e.onClick,a=Object(o.useState)(),i=Object(j.a)(a,2),u=i[0],l=i[1],s=[{headerName:"Ccy",field:"currencyPair",valueFormatter:function(e){return z(e.value)}},{headerName:"Bid Price",field:"bid",cellStyle:function(){return{color:An.Bid,display:"flex","justify-content":"flex-end"}},type:"numericColumn",valueFormatter:En,cellRenderer:"priceRenderer"},{headerName:"Ask Price",field:"ask",cellStyle:function(){return{color:An.Ask}},valueFormatter:En,cellRenderer:"priceRenderer"},{headerName:"Volume",field:"volume",valueFormatter:hn},{headerName:"",field:"prices",cellRenderer:"priceChartRenderer",width:100,cellStyle:function(){return{"padding-left":0,"padding-right":0}}}];return Object(o.useEffect)((function(){u&&(u.forEachNode((function(e){e.setSelected(e.data.currencyPair===t)})),u.redrawRows())}),[u,t]),jn(u),c.a.createElement(Qt,{className:"ag-theme-balham-dark"},c.a.createElement(On.AgGridReact,{columnDefs:s,rowData:n,rowClassRules:{"selected-row":function(e){return e.node.isSelected()},"stale-row":function(e){return e.data.isStale}},deltaRowDataMode:!0,getRowNodeId:function(e){return e.currencyPair},onGridReady:function(e){l(e.api)},rowSelection:"single",onRowClicked:function(e){r(e.data.currencyPair)},noRowsOverlayComponent:"customLoadingOverlay",frameworkComponents:{priceChartRenderer:or,priceRenderer:lr,customLoadingOverlay:xn}}))},dr=Object(l.b)((function(e){return{tickers:Zn(e),selectedCurrencyPair:Q(e)}}),(function(e){return{onClick:function(n){return e(U.selectCurrencyPair({currencyPair:n}))}}}))(sr);function fr(){var e=Object(Sn.a)(["\n  grid-area: body;\n"]);return fr=function(){return e},e}function br(){var e=Object(Sn.a)(["\n  grid-area: header;\n  color: ",";\n  font-size: 12px;\n"]);return br=function(){return e},e}function mr(){var e=Object(Sn.a)(['\n  height: 100%;\n  display: grid;\n  grid-template-rows: 20px 1fr;\n  grid-template-columns: 1fr;\n  grid-template-areas:\n    "header"\n    "body";\n']);return mr=function(){return e},e}var Or=gn.a.div(mr()),pr=gn.a.div(br(),An.Label),vr=gn.a.div(fr()),Er=function(e){var n=e.children,t=e.title;return c.a.createElement(Or,null,c.a.createElement(pr,null,t),c.a.createElement(vr,null,n))};function Cr(){var e=Object(Sn.a)(["\n  font-size: 10px;\n  color: ",";\n  padding: 0 10px;\n  display: flex;\n  width: 85px;\n  justify-content: space-between;\n  color: ",";\n"]);return Cr=function(){return e},e}var hr=gn.a.div(Cr(),An.White,An.LightGray),yr=function(){var e=Object(o.useState)(),n=Object(j.a)(e,2),t=n[0],r=n[1];return Object(o.useEffect)((function(){var e=void 0,n=setInterval((function(){var n=Date.now();e&&clearTimeout(e),e=setTimeout((function(){r(Date.now()-n)}))}),2e3);return function(){clearInterval(n),e&&clearTimeout(e)}}),[]),c.a.createElement(hr,null,c.a.createElement("span",null,"UI Latency: "),c.a.createElement("span",null,t||"---","ms"))},jr=Object(w.a)((function(e){return e.ping}),(function(e){return e.latency}));function Sr(){var e=Object(Sn.a)(["\n  font-size: 16px;\n"]);return Sr=function(){return e},e}function gr(){var e=Object(Sn.a)(["\n  color: ",";\n  font-size: 10px;\n  width: 85px;\n  display: flex;\n  justify-content: space-between;\n  color: ",";\n"]);return gr=function(){return e},e}var Ar=gn.a.div(gr(),An.White,An.LightGray),_r=gn.a.i(Sr()),Rr=function(e){var n=e.latency;return c.a.createElement(Ar,null,c.a.createElement("span",null,"Round trip: "),-1===n?c.a.createElement(_r,{className:"material-icons"},"warning"):c.a.createElement("span",null,n||"---","ms"))},Nr=Object(l.b)((function(e){return{latency:jr(e)}}))(Rr);function Tr(){var e=Object(Sn.a)(["\n  transform: ",";\n  border: 1px solid ",";\n"]);return Tr=function(){return e},e}function kr(){var e=Object(Sn.a)(["\n  transform: ",";\n"]);return kr=function(){return e},e}function Br(){var e=Object(Sn.a)(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-color: ",";\n"]);return Br=function(){return e},e}function Fr(){var e=Object(Sn.a)(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  transform-style: preserve-3d;\n  transform: ",";\n"]);return Fr=function(){return e},e}function xr(){var e=Object(Sn.a)(["\n  perspective: ",";\n  width: 100%;\n  height: 100%;\n"]);return xr=function(){return e},e}var Ir=gn.a.div(xr(),(function(e){var n=e.width;return"".concat(n,"px")})),wr=gn.a.div(Fr(),(function(e){var n=e.width;return"translateZ(".concat(-n/2,"px)")})),Dr=gn.a.div(Br(),An.BackgroundColor),Pr=Object(gn.a)(Dr)(kr(),(function(e){var n=e.width;return"rotateY(0deg) translateZ(".concat(n/2,"px)")})),Lr=Object(gn.a)(Dr)(Tr(),(function(e){var n=e.width;return"rotateY(90deg) translateZ(".concat(n/2,"px)")}),An.Border),Ur=function(e){var n=e.trigger,t=e.children,r=Object(o.useState)(0),a=Object(j.a)(r,2),i=a[0],u=a[1],l=Jn(n),s=Jn(i),d=Object(o.createRef)(),f=Object(o.createRef)();return Object(o.useEffect)((function(){var e=function(){if(d&&d.current){var e=d.current.getBoundingClientRect().width;console.log("Update cube width to ".concat(e)),u(e)}else console.warn("Failed to update cube")},n=Object(be.debounce)((function(){requestAnimationFrame(e)}),200);return e(),window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[d]),Object(o.useEffect)((function(){var e=void 0;return l&&s===i&&requestAnimationFrame((function(){var n;e=null===(n=f.current)||void 0===n?void 0:n.animate([{transform:"translateZ(-".concat(i/2,"px)")},{transform:"translateZ(-".concat(i/2,"px) rotateY(-90deg)")}],{duration:1e3,iterations:1,easing:"ease-out"})})),function(){e&&e.cancel()}}),[n,i]),c.a.createElement(Ir,{ref:d,width:i},c.a.createElement(wr,{ref:f,width:i},c.a.createElement(Pr,{width:i},t),c.a.createElement(Lr,{width:i})," }"))},Mr=function(e){var n=e.currencyPair,t=e.children;return c.a.createElement(Ur,{trigger:n},t)},Gr=Object(l.b)((function(e){return{currencyPair:Q(e)}}))(Mr);function Hr(){var e=Object(Sn.a)(["\n  grid-area: footer;\n  padding: 0 10px;\n  display: flex;\n  justify-content: flex-end;\n"]);return Hr=function(){return e},e}function Kr(){var e=Object(Sn.a)(["\n  grid-area: depth;\n"]);return Kr=function(){return e},e}function zr(){var e=Object(Sn.a)(["\n  grid-area: book;\n"]);return zr=function(){return e},e}function Wr(){var e=Object(Sn.a)(["\n  grid-area: candles;\n"]);return Wr=function(){return e},e}function Vr(){var e=Object(Sn.a)(["\n  grid-area: trades;\n"]);return Vr=function(){return e},e}function qr(){var e=Object(Sn.a)(["\n  grid-area: market;\n"]);return qr=function(){return e},e}function Yr(){var e=Object(Sn.a)(["\n  grid-area: tickers;\n  margin: 0 auto;\n"]);return Yr=function(){return e},e}function Zr(){var e=Object(Sn.a)(["\n  grid-area: header;\n  color: ",";\n  font-family: FiraSans-MediumItalic;\n  background-color: #2d3436;\n  padding: 0 0 0 10px;\n  font-size: 28px;\n"]);return Zr=function(){return e},e}function Jr(){var e=Object(Sn.a)(['\n  display: grid;\n  grid-gap: 5px;\n  padding: 5px 10px;\n  width: 100%;\n  height: 100%;\n  @media only screen and (min-width: 1200px) {\n    grid-template-rows: 40px 70px 1fr 250px 30px;\n    grid-template-columns: 450px 1fr 1fr;\n    grid-template-areas:\n      "header header header"\n      "tickers tickers tickers"\n      "market candles candles"\n      "trades book depth"\n      "footer footer footer";\n  }\n\n  @media only screen and (min-width: 600px) and (max-width: 1200px) {\n    grid-template-rows: 40px 70px 1fr 1fr 30px;\n    grid-template-columns: 1fr 1fr;\n    grid-template-areas:\n      "header header"\n      "market book"\n      "market book"\n      "trades depth"\n      "footer footer";\n\n    .tickers {\n      display: none;\n    }\n\n    .candles-chart {\n      display: none;\n    }\n  }\n\n  @media only screen and (max-width: 600px) {\n    grid-template-rows: 40px calc(100% - 90px) 30px;\n    grid-template-columns: calc(100% - 20px);\n    grid-template-areas:\n      "header"\n      "market"\n      "footer";\n\n    .candles-chart {\n      display: none;\n    }\n  }\n']);return Jr=function(){return e},e}function Xr(){var e=Object(Sn.a)(["\n  background-color: ",";\n  width: 100vw;\n  height: 100vh;\n  overflow: hidden;\n"]);return Xr=function(){return e},e}var $r=gn.a.div(Xr(),An.BackgroundColor),Qr=gn.a.div(Jr()),ea=gn.a.div(Zr(),An.White),na=gn.a.div(Yr()),ta=gn.a.div(qr()),ra=gn.a.div(Vr()),aa=gn.a.div(Wr()),oa=gn.a.div(zr()),ca=gn.a.div(Kr()),ia=gn.a.div(Hr());t(117),t(118),t(119);var ua=function(){var e=function(){var e=Object(s.e)(ln,mn(Object(s.a)(bn,fn)));return sn.onConnect((function(){e.dispatch(O.changeConnectionStatus(r.Connected)),console.log("Connected")})),sn.onClose((function(){e.dispatch(O.changeConnectionStatus(r.Disconnected)),console.log("Disconnected")})),fn.run(un),e}();return Object(o.useEffect)((function(){e.dispatch($.bootstrapApp())}),[]),c.a.createElement(l.a,{store:e},c.a.createElement($r,null,c.a.createElement(Qr,null,c.a.createElement(ea,null,"Crypto Trader"),c.a.createElement(na,null,c.a.createElement(_t,null)),c.a.createElement(ta,null,c.a.createElement(Er,{title:"Market"},c.a.createElement(dr,null))),c.a.createElement(ra,null,c.a.createElement(Er,{title:"Trades"},c.a.createElement(Gr,null,c.a.createElement(Gn,null)))),c.a.createElement(aa,null,c.a.createElement(It,null)),c.a.createElement(oa,null,c.a.createElement(Er,{title:"Book"},c.a.createElement(Gr,null,c.a.createElement(Vt,null)))),c.a.createElement(ca,null,c.a.createElement(Er,{title:"Depth"},c.a.createElement(Gr,null,c.a.createElement(Xt,null)))),c.a.createElement(ia,null,c.a.createElement(Nr,null),c.a.createElement(yr,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(ua,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},86:function(e,n,t){e.exports=t(120)},91:function(e,n,t){}},[[86,1,2]]]);
//# sourceMappingURL=main.434f93a7.chunk.js.map